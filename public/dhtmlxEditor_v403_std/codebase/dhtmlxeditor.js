/*
Product Name: dhtmlxEditor 
Version: 4.0.3 
Edition: Standard 
License: content of this file is covered by GPL. Usage outside GPL terms is prohibited. To obtain Commercial or Enterprise license contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

if(typeof(window.dhx4)=="undefined"){window.dhx4={version:"4.0.3",skin:null,skinDetect:function(b){var c=document.createElement("DIV");c.className=b+"_skin_detect";if(document.body.firstChild){document.body.insertBefore(c,document.body.firstChild)}else{document.body.appendChild(c)}var a=c.offsetWidth;c.parentNode.removeChild(c);c=null;return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[a]||null},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var c=this.first();for(var b in this.data){c=Math.max(c,this.data[b])}return c},reserve:function(a){this.data[a]=this.last()+this.step;return this.data[a]},clear:function(a){if(this.data[a]!=null){this.data[a]=null;delete this.data[a]}}},s2b:function(a){return(a==true||a==1||a=="true"||a=="1"||a=="yes"||a=="y")},trim:function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")},template:function(b,c,a){return b.replace(/#([a-zA-Z0-9_-]{1,})#/g,function(e,d){if(d.length>0&&typeof(c[d])!="undefined"){if(a==true){return window.dhx4.trim(c[d])}return String(c[d])}return""})},absLeft:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this._aOfs(a).left},absTop:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this._aOfs(a).top},_aOfsSum:function(a){var c=0,b=0;while(a){c=c+parseInt(a.offsetTop);b=b+parseInt(a.offsetLeft);a=a.offsetParent}return{top:c,left:b}},_aOfsRect:function(d){var g=d.getBoundingClientRect();var h=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||h.scrollTop;var e=window.pageXOffset||b.scrollLeft||h.scrollLeft;var f=b.clientTop||h.clientTop||0;var i=b.clientLeft||h.clientLeft||0;var j=g.top+a-f;var c=g.left+e-i;return{top:Math.round(j),left:Math.round(c)}},_aOfs:function(a){if(a.getBoundingClientRect){return this._aOfsRect(a)}else{return this._aOfsSum(a)}},_isObj:function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")},_copyObj:function(d){if(this._isObj(d)){var c={};for(var b in d){if(typeof(d[b])=="object"&&d[b]!=null){c[b]=this._copyObj(d[b])}else{c[b]=d[b]}}}else{var c=[];for(var b=0;b<d.length;b++){if(typeof(d[b])=="object"&&d[b]!=null){c[b]=this._copyObj(d[b])}else{c[b]=d[b]}}}return c},screenDim:function(){var a=(navigator.userAgent.indexOf("MSIE")>=0);var b={};b.left=document.body.scrollLeft;b.right=b.left+(window.innerWidth||document.body.clientWidth);b.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);b.bottom=b.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return b},selectTextRange:function(d,g,b){d=(typeof(d)=="string"?document.getElementById(d):d);var a=d.value.length;g=Math.max(Math.min(g,a),0);b=Math.min(b,a);if(d.setSelectionRange){try{d.setSelectionRange(g,b)}catch(f){}}else{if(d.createTextRange){var c=d.createTextRange();c.moveStart("character",g);c.moveEnd("character",b-a);try{c.select()}catch(f){}}}},transData:null,transDetect:function(){if(this.transData==null){this.transData={transProp:false,transEv:null};var c={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var b in c){if(this.transData.transProp==false&&document.documentElement.style[b]!=null){this.transData.transProp=b;this.transData.transEv=c[b]}}c=null}return this.transData}};window.dhx4.isIE=(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE6=(window.XMLHttpRequest==null&&navigator.userAgent.indexOf("MSIE")>=0);window.dhx4.isIE7=(navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0);window.dhx4.isOpera=(navigator.userAgent.indexOf("Opera")>=0);window.dhx4.isChrome=(navigator.userAgent.indexOf("Chrome")>=0);window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0);window.dhx4.isFF=(navigator.userAgent.indexOf("Firefox")>=0);window.dhx4.isIPad=(navigator.userAgent.search(/iPad/gi)>=0)}if(typeof(window.dhx4.ajax)=="undefined"){window.dhx4.ajax={cache:false,method:"post",get:function(a,b){this._call("GET",a,null,true,b)},getSync:function(a){return this._call("GET",a,null,false)},post:function(b,a,c){if(arguments.length==1){a=""}else{if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a])=="function")){c=a;a=""}else{a=String(a)}}this._call("POST",b,a,true,c)},postSync:function(b,a){a=(a==null?"":String(a));return this._call("POST",b,a,false)},getLong:function(a,b){this._call("GET",a,null,true,b,{url:a})},postLong:function(b,a,c){if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a]))){c=a;a=""}this._call("POST",b,a,true,c,{url:b,postData:a})},_call:function(h,b,a,f,e,d){var c=(window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));var g=(navigator.userAgent.match(/AppleWebKit/)!=null&&navigator.userAgent.match(/Qt/)!=null&&navigator.userAgent.match(/Safari/)!=null);if(f==true){c.onreadystatechange=function(){if((c.readyState==4&&c.status==200)||(g==true&&c.readyState==3)){window.setTimeout(function(){if(typeof(e)=="function"){e.apply(window,[{xmlDoc:c}])}if(d!=null){if(typeof(d.postData)!="undefined"){dhx4.ajax.postLong(d.url,d.postData,e)}else{dhx4.ajax.getLong(d.url,e)}}e=null;c=null},1)}}}if(h=="GET"&&this.cache!=true){b+=(b.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime()}c.open(h,b,f);if(h=="POST"){c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");if(this.cache!=true){a+=(a.length>0?"&":"")+"dhxr"+new Date().getTime()}}else{a=null}c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.send(a);if(!f){return{xmlDoc:c}}}}}if(typeof(window.dhx4._enableDataLoading)=="undefined"){window.dhx4._enableDataLoading=function(obj,initObj,xmlToJson,xmlRootTag,mode){if(mode=="clear"){for(var a in obj._dhxdataload){obj._dhxdataload[a]=null;delete obj._dhxdataload[a]}obj._loadData=null;obj._dhxdataload=null;obj.load=null;obj.loadStruct=null;obj=null;return}obj._dhxdataload={initObj:initObj,xmlToJson:xmlToJson,xmlRootTag:xmlRootTag,onBeforeXLS:null};obj._loadData=function(data,loadParams,onLoad){if(arguments.length==2){onLoad=loadParams;loadParams=null}var obj=null;if(arguments.length==3){onLoad=arguments[2]}if(typeof(data)=="string"){var k=data.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");var tag=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(tag.test(k.replace(/^<\?xml[^\?]*\?>\s*/,""))){if(window.DOMParser){obj=(new window.DOMParser()).parseFromString(data,"text/xml")}else{if(typeof(window.ActiveXObject)!="undefined"){obj=new window.ActiveXObject("Microsoft.XMLDOM");obj.async="false";obj.loadXML(data)}}if(obj!=null){obj=this[this._dhxdataload.xmlToJson].apply(this,[obj])}}if(obj==null&&(k.match(/^\{.*\}$/)!=null||k.match(/^\[.*\]$/)!=null)){try{eval("dhx4.temp="+k)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null}if(obj==null){this.callEvent("onXLS",[]);var params=[];if(typeof(this._dhxdataload.onBeforeXLS)=="function"){var k=this._dhxdataload.onBeforeXLS.apply(this,[data]);if(k!=null&&typeof(k)=="object"){if(k.url!=null){data=k.url}if(k.params!=null){for(var a in k.params){params.push(a+"="+encodeURIComponent(k.params[a]))}}}}var t=this;var callBack=function(r){var obj=null;if((r.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||(r.xmlDoc.responseText.replace(/^\s{1,}/,"")).match(/^</)!=null){obj=t[t._dhxdataload.xmlToJson].apply(t,[r.xmlDoc.responseXML])}else{try{eval("dhx4.temp="+r.xmlDoc.responseText)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null}if(obj!=null){t[t._dhxdataload.initObj].apply(t,[obj,data])}t.callEvent("onXLE",[]);if(onLoad!=null){if(typeof(onLoad)=="function"){onLoad.apply(t,[])}else{if(typeof(window[onLoad])=="function"){window[onLoad].apply(t,[])}}}callBack=onLoad=null;obj=r=t=null};params=params.join("&")+(typeof(loadParams)=="string"?"&"+loadParams:"");if(dhx4.ajax.method=="post"){dhx4.ajax.post(data,params,callBack)}else{if(dhx4.ajax.method=="get"){dhx4.ajax.get(data+(data.indexOf("?")>0?"":"")+params,callBack)}}return}}else{if(typeof(data.documentElement)=="object"||(typeof(data.tagName)!="undefined"&&typeof(data.getElementsByTagName)!="undefined"&&data.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0)){obj=this[this._dhxdataload.xmlToJson].apply(this,[data])}else{obj=window.dhx4._copyObj(data)}}if(obj!=null){this[this._dhxdataload.initObj].apply(this,[obj])}if(onLoad!=null){if(typeof(onLoad)=="function"){onLoad.apply(this,[])}else{if(typeof(window[onLoad])=="function"){window[onLoad].apply(this,[])}}onLoad=null}};if(mode!=null){var k={struct:"loadStruct",data:"load"};for(var a in mode){if(mode[a]==true){obj[k[a]]=function(){return this._loadData.apply(this,arguments)}}}}obj=null}}if(typeof(window.dhx4._eventable)=="undefined"){window.dhx4._eventable=function(a,b){if(b=="clear"){a.detachAllEvents();a.dhxevs=null;a.attachEvent=null;a.detachEvent=null;a.checkEvent=null;a.callEvent=null;a.detachAllEvents=null;a=null;return}a.dhxevs={data:{}};a.attachEvent=function(c,e){c=String(c).toLowerCase();if(!this.dhxevs.data[c]){this.dhxevs.data[c]={}}var d=window.dhx4.newId();this.dhxevs.data[c][d]=e;return d};a.detachEvent=function(f){for(var d in this.dhxevs.data){var e=0;for(var c in this.dhxevs.data[d]){if(c==f){this.dhxevs.data[d][c]=null;delete this.dhxevs.data[d][c]}else{e++}}if(e==0){this.dhxevs.data[d]=null;delete this.dhxevs.data[d]}}};a.checkEvent=function(c){c=String(c).toLowerCase();return(this.dhxevs.data[c]!=null)};a.callEvent=function(d,f){d=String(d).toLowerCase();if(this.dhxevs.data[d]==null){return true}var e=true;for(var c in this.dhxevs.data[d]){e=this.dhxevs.data[d][c].apply(this,f)&&e}return e};a.detachAllEvents=function(){for(var d in this.dhxevs.data){for(var c in this.dhxevs.data[d]){this.dhxevs.data[d][c]=null;delete this.dhxevs.data[d][c]}this.dhxevs.data[d]=null;delete this.dhxevs.data[d]}};a=null}}dhtmlx=function(c){for(var b in c){dhtmlx[b]=c[b]}return dhtmlx};dhtmlx.extend_api=function(a,d,c){var b=window[a];if(!b){return}window[a]=function(g){if(g&&typeof g=="object"&&!g.tagName){var f=b.apply(this,(d._init?d._init(g):arguments));for(var e in dhtmlx){if(d[e]){this[d[e]](dhtmlx[e])}}for(var e in g){if(d[e]){this[d[e]](g[e])}else{if(e.indexOf("on")==0){this.attachEvent(e,g[e])}}}}else{var f=b.apply(this,arguments)}if(d._patch){d._patch(this)}return f||this};window[a].prototype=b.prototype;if(c){dhtmlXHeir(window[a].prototype,c)}};dhtmlxAjax={get:function(a,c){var b=new dtmlXMLLoaderObject(true);b.async=(arguments.length<3);b.waitCall=c;b.loadXML(a);return b},post:function(a,c,d){var b=new dtmlXMLLoaderObject(true);b.async=(arguments.length<4);b.waitCall=d;b.loadXML(a,true,c);return b},getSync:function(a){return this.get(a,null,true)},postSync:function(a,b){return this.post(a,b,null,true)}};function dtmlXMLLoaderObject(b,d,c,a){this.xmlDoc="";if(typeof(c)!="undefined"){this.async=c}else{this.async=true}this.onloadAction=b||null;this.mainObject=d||null;this.waitCall=null;this.rSeed=a||false;return this}dtmlXMLLoaderObject.count=0;dtmlXMLLoaderObject.prototype.waitLoadFunction=function(b){var a=true;this.check=function(){if((b)&&(b.onloadAction!=null)){if((!b.xmlDoc.readyState)||(b.xmlDoc.readyState==4)){if(!a){return}a=false;dtmlXMLLoaderObject.count++;if(typeof b.onloadAction=="function"){b.onloadAction(b.mainObject,null,null,null,b)}if(b.waitCall){b.waitCall.call(this,b);b.waitCall=null}}}};return this.check};dtmlXMLLoaderObject.prototype.getXMLTopNode=function(c,a){if(typeof this.xmlDoc.status=="undefined"||this.xmlDoc.status<400){if(this.xmlDoc.responseXML){var b=this.xmlDoc.responseXML.getElementsByTagName(c);if(b.length==0&&c.indexOf(":")!=-1){var b=this.xmlDoc.responseXML.getElementsByTagName((c.split(":"))[1])}var d=b[0]}else{var d=this.xmlDoc.documentElement}if(d){this._retry=false;return d}if(!this._retry&&_isIE){this._retry=true;var a=this.xmlDoc;this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,""),true);return this.getXMLTopNode(c,a)}}dhtmlxError.throwError("LoadXML","Incorrect XML",[(a||this.xmlDoc),this.mainObject]);return document.createElement("DIV")};dtmlXMLLoaderObject.prototype.loadXMLString=function(b,a){if(!_isIE){var c=new DOMParser();this.xmlDoc=c.parseFromString(b,"text/xml")}else{this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM");this.xmlDoc.async=this.async;this.xmlDoc.onreadystatechange=function(){};this.xmlDoc.loadXML(b)}if(a){return}if(this.onloadAction){this.onloadAction(this.mainObject,null,null,null,this)}if(this.waitCall){this.waitCall();this.waitCall=null}};dtmlXMLLoaderObject.prototype.loadXML=function(c,b,a,d){if(this.rSeed){c+=((c.indexOf("?")!=-1)?"&":"?")+"a_dhx_rSeed="+(new Date()).valueOf()}this.filePath=c;if((!_isIE)&&(window.XMLHttpRequest)){this.xmlDoc=new XMLHttpRequest()}else{this.xmlDoc=new ActiveXObject("Microsoft.XMLHTTP")}if(this.async){this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)}this.xmlDoc.open(b?"POST":"GET",c,this.async);if(d){this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")");this.xmlDoc.setRequestHeader("Content-type","text/xml")}else{if(b){this.xmlDoc.setRequestHeader("Content-type",(this.contenttype||"application/x-www-form-urlencoded"))}}this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlDoc.send(null||a);if(!this.async){(new this.waitLoadFunction(this))()}};dtmlXMLLoaderObject.prototype.destructor=function(){this._filterXPath=null;this._getAllNamedChilds=null;this._retry=null;this.async=null;this.rSeed=null;this.filePath=null;this.onloadAction=null;this.mainObject=null;this.xmlDoc=null;this.doXPath=null;this.doXPathOpera=null;this.doXSLTransToObject=null;this.doXSLTransToString=null;this.loadXML=null;this.loadXMLString=null;this.doSerialization=null;this.xmlNodeToJSON=null;this.getXMLTopNode=null;this.setXSLParamValue=null;return null};dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(d){var c={};for(var b=0;b<d.attributes.length;b++){c[d.attributes[b].name]=d.attributes[b].value}c._tagvalue=d.firstChild?d.firstChild.nodeValue:"";for(var b=0;b<d.childNodes.length;b++){var a=d.childNodes[b].tagName;if(a){if(!c[a]){c[a]=[]}c[a].push(this.xmlNodeToJSON(d.childNodes[b]))}}return c};function callerFunction(a,b){this.handler=function(c){if(!c){c=window.event}a(c,b);return true};return this.handler}function getAbsoluteLeft(a){return getOffset(a).left}function getAbsoluteTop(a){return getOffset(a).top}function getOffsetSum(a){var c=0,b=0;while(a){c=c+parseInt(a.offsetTop);b=b+parseInt(a.offsetLeft);a=a.offsetParent}return{top:c,left:b}}function getOffsetRect(d){var g=d.getBoundingClientRect();var h=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||h.scrollTop;var e=window.pageXOffset||b.scrollLeft||h.scrollLeft;var f=b.clientTop||h.clientTop||0;var i=b.clientLeft||h.clientLeft||0;var j=g.top+a-f;var c=g.left+e-i;return{top:Math.round(j),left:Math.round(c)}}function getOffset(a){if(a.getBoundingClientRect){return getOffsetRect(a)}else{return getOffsetSum(a)}}function convertStringToBoolean(a){if(typeof(a)=="string"){a=a.toLowerCase()}switch(a){case"1":case"true":case"yes":case"y":case 1:case true:return true;break;default:return false}}function getUrlSymbol(a){if(a.indexOf("?")!=-1){return"&"}else{return"?"}}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy;a.dragStarter=b;this.addDragLanding(a,b)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if((a||window.event)&&(a||event).button==2){return}if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false}if(window.dhtmlDragAndDrop.dragNode){window.dhtmlDragAndDrop.stopDrag(a)}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=new Date().valueOf();if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.callDrag=function(c){if(!c){c=window.event}dragger=window.dhtmlDragAndDrop;if((new Date()).valueOf()-dragger.downtime<100){return}if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,c);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return false};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else{return dragger.stopDrag(c,true)}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var a=dragger.gldragNode;if(dragger.gldragNode.old){a=dragger.gldragNode.old}a.parentNode.removeChild(a);var b=dragger.dragNode.pWindow;if(a.pWindow&&a.pWindow.dhtmlDragAndDrop.lastLanding){a.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(a.pWindow.dhtmlDragAndDrop.lastLanding)}if(_isIE){var f=document.createElement("Div");f.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=f.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(true)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);b.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=c.clientX+15+(dragger.fx?dragger.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=c.clientY+3+(dragger.fy?dragger.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!c.srcElement){var d=c.target}else{d=c.srcElement}dragger.checkLanding(d,c)};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(e){if(window.name){var c=parent.frames[window.name].frameElement.offsetParent;var d=0;var b=0;while(c){d+=c.offsetLeft;b+=c.offsetTop;c=c.offsetParent}if((parent.dhtmlDragAndDrop)){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);d+=a.split("_")[0]*1;b+=a.split("_")[1]*1}if(e){return d+"_"+b}else{this.fx=d}this.fy=b}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(b,a){if((b)&&(b.dragLanding)){if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding)}this.lastLanding=b;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,a.clientX,a.clientY,a);this.lastLanding_scr=(_isIE?a.srcElement:a.target)}else{if((b)&&(b.tagName!="BODY")){this.checkLanding(b.parentNode,a)}else{if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding,a.clientX,a.clientY,a)}this.lastLanding=0;if(this._onNotFound){this._onNotFound()}}}};dhtmlDragAndDropObject.prototype.stopDrag=function(b,c){dragger=window.dhtmlDragAndDrop;if(!c){dragger.stopFrameRoute();var a=dragger.lastLanding;dragger.lastLanding=null;if(a){a.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,a,(_isIE?event.srcElement:b.target))}}dragger.lastLanding=null;if((dragger.dragNode)&&(dragger.dragNode.parentNode==document.body)){dragger.dragNode.parentNode.removeChild(dragger.dragNode)}dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(c){if(c){window.dhtmlDragAndDrop.stopDrag(1,1)}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(c,d){if(c){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=c.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=c.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=c.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=c.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(((!_isIE)&&(d))&&((!_isFF)||(_FFrv<1.8))){window.dhtmlDragAndDrop.calculateFramePosition()}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.initFrameRoute(window)}}catch(b){}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.initFrameRoute(window,((!c||d)?1:0))}}catch(b){}}};_isFF=false;_isIE=false;_isOpera=false;_isKHTML=false;_isMacOS=false;_isChrome=false;_FFrv=false;_KHTMLrv=false;_OperaRv=false;if(navigator.userAgent.indexOf("Macintosh")!=-1){_isMacOS=true}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){_isChrome=true}if((navigator.userAgent.indexOf("Safari")!=-1)||(navigator.userAgent.indexOf("Konqueror")!=-1)){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;_FFrv=1.9}else{_isKHTML=true}}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if((navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1||document.documentMode>7)&&document.compatMode!="BackCompat"){_isIE=8}}else{if(navigator.appName=="Netscape"&&navigator.userAgent.indexOf("Trident")!=-1){_isIE=8}else{_isFF=true;_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}}dtmlXMLLoaderObject.prototype.doXPath=function(c,e,d,i){if(_isKHTML||(!_isIE&&!window.XPathResult)){return this.doXPathOpera(c,e)}if(_isIE){if(!e){if(!this.xmlDoc.nodeName){e=this.xmlDoc.responseXML}else{e=this.xmlDoc}}if(!e){dhtmlxError.throwError("LoadXML","Incorrect XML",[(e||this.xmlDoc),this.mainObject])}if(d!=null){e.setProperty("SelectionNamespaces","xmlns:xsl='"+d+"'")}if(i=="single"){return e.selectSingleNode(c)}else{return e.selectNodes(c)||new Array(0)}}else{var a=e;if(!e){if(!this.xmlDoc.nodeName){e=this.xmlDoc.responseXML}else{e=this.xmlDoc}}if(!e){dhtmlxError.throwError("LoadXML","Incorrect XML",[(e||this.xmlDoc),this.mainObject])}if(e.nodeName.indexOf("document")!=-1){a=e}else{a=e;e=e.ownerDocument}var g=XPathResult.ANY_TYPE;if(i=="single"){g=XPathResult.FIRST_ORDERED_NODE_TYPE}var f=new Array();var b=e.evaluate(c,a,function(j){return d},g,null);if(g==XPathResult.FIRST_ORDERED_NODE_TYPE){return b.singleNodeValue}var h=b.iterateNext();while(h){f[f.length]=h;h=b.iterateNext()}return f}};function _dhtmlxError(b,a,c){if(!this.catches){this.catches=new Array()}return this}_dhtmlxError.prototype.catchError=function(b,a){this.catches[b]=a};_dhtmlxError.prototype.throwError=function(b,a,c){if(this.catches[b]){return this.catches[b](b,a,c)}if(this.catches.ALL){return this.catches.ALL(b,a,c)}alert("Error type: "+arguments[0]+"\nDescription: "+arguments[1]);return null};window.dhtmlxError=new _dhtmlxError();dtmlXMLLoaderObject.prototype.doXPathOpera=function(c,a){var e=c.replace(/[\/]+/gi,"/").split("/");var d=null;var b=1;if(!e.length){return[]}if(e[0]=="."){d=[a]}else{if(e[0]==""){d=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(e[b].replace(/\[[^\]]*\]/g,""));b++}else{return[]}}for(b;b<e.length;b++){d=this._getAllNamedChilds(d,e[b])}if(e[b-1].indexOf("[")!=-1){d=this._filterXPath(d,e[b-1])}return d};dtmlXMLLoaderObject.prototype._filterXPath=function(e,d){var g=new Array();var d=d.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,"");for(var f=0;f<e.length;f++){if(e[f].getAttribute(d)){g[g.length]=e[f]}}return g};dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(e,d){var h=new Array();if(_isKHTML){d=d.toUpperCase()}for(var g=0;g<e.length;g++){for(var f=0;f<e[g].childNodes.length;f++){if(_isKHTML){if(e[g].childNodes[f].tagName&&e[g].childNodes[f].tagName.toUpperCase()==d){h[h.length]=e[g].childNodes[f]}}else{if(e[g].childNodes[f].tagName==d){h[h.length]=e[g].childNodes[f]}}}}return h};function dhtmlXHeir(e,d){for(var f in d){if(typeof(d[f])=="function"){e[f]=d[f]}}return e}function dhtmlxEvent(b,c,a){if(b.addEventListener){b.addEventListener(c,a,false)}else{if(b.attachEvent){b.attachEvent("on"+c,a)}}}dtmlXMLLoaderObject.prototype.xslDoc=null;dtmlXMLLoaderObject.prototype.setXSLParamValue=function(b,c,d){if(!d){d=this.xslDoc}if(d.responseXML){d=d.responseXML}var a=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+b+"']",d,"http://www.w3.org/1999/XSL/Transform","single");if(a!=null){a.firstChild.nodeValue=c}};dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(d,b){if(!d){d=this.xslDoc}if(d.responseXML){d=d.responseXML}if(!b){b=this.xmlDoc}if(b.responseXML){b=b.responseXML}if(!_isIE){if(!this.XSLProcessor){this.XSLProcessor=new XSLTProcessor();this.XSLProcessor.importStylesheet(d)}var a=this.XSLProcessor.transformToDocument(b)}else{var a=new ActiveXObject("Msxml2.DOMDocument.3.0");try{b.transformNodeToObject(d,a)}catch(c){a=b.transformNode(d)}}return a};dtmlXMLLoaderObject.prototype.doXSLTransToString=function(c,b){var a=this.doXSLTransToObject(c,b);if(typeof(a)=="string"){return a}return this.doSerialization(a)};dtmlXMLLoaderObject.prototype.doSerialization=function(b){if(!b){b=this.xmlDoc}if(b.responseXML){b=b.responseXML}if(!_isIE){var a=new XMLSerializer();return a.serializeToString(b)}else{return b.xml}};dhtmlxEventable=function(obj){obj.attachEvent=function(name,catcher,callObj){name="ev_"+name.toLowerCase();if(!this[name]){this[name]=new this.eventCatcher(callObj||this)}return(name+":"+this[name].addEvent(catcher))};obj.callEvent=function(name,arg0){name="ev_"+name.toLowerCase();if(this[name]){return this[name].apply(this,arg0)}return true};obj.checkEvent=function(name){return(!!this["ev_"+name.toLowerCase()])};obj.eventCatcher=function(obj){var dhx_catch=[];var z=function(){var res=true;for(var i=0;i<dhx_catch.length;i++){if(dhx_catch[i]!=null){var zr=dhx_catch[i].apply(obj,arguments);res=res&&zr}}return res};z.addEvent=function(ev){if(typeof(ev)!="function"){ev=eval(ev)}if(ev){return dhx_catch.push(ev)-1}return false};z.removeEvent=function(id){dhx_catch[id]=null};return z};obj.detachEvent=function(id){if(id!=false){var list=id.split(":");this[list[0]].removeEvent(list[1])}};obj.detachAllEvents=function(){for(var name in this){if(name.indexOf("ev_")==0){this.detachEvent(name);this[name]=null}}};obj=null};function dhtmlXCellObject(c,a){this.cell=document.createElement("DIV");this.cell.className="dhx_cell"+(a||"");this._idd=c;this._isCell=true;this.conf={borders:true,idx:{},css:a||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar"},ofs_nodes:{t:{},b:{}}};this.dataNodes={};this.views={};var b=document.createElement("DIV");b.className="dhx_cell_cont"+this.conf.css;this.cell.appendChild(b);b=null;this._updateIdx=function(){for(var d in this.conf.idx){this.conf.idx[d]=null;delete this.conf.idx[d]}for(var g=0;g<this.cell.childNodes.length;g++){var e=this.cell.childNodes[g].className;for(var d in this.conf.idx_data){var f=new RegExp(this.conf.idx_data[d]);if(e.match(f)!=null){this.conf.idx[d]=g}}}this.callEvent("_onIdxUpdated",[])};this._adjustAttached=function(){for(var d in this.dataNodes){if(this.dataNodes[d]!=null&&typeof(this.dataNodes[d].setSizes)=="function"){this.dataNodes[d].setSizes()}}if(this.dataObj!=null&&typeof(this.dataObj.setSizes)=="function"){this.dataObj.setSizes.apply(this.dataObj,arguments)}};this._setSize=function(e,k,f,i,j,d,g){if(!this.conf.size){this.conf.size={}}this.conf.size.x=e;this.conf.size.y=k;this.conf.size.w=f;this.conf.size.h=i;this.cell.style.left=e+"px";this.cell.style.top=k+"px";this.cell.style.width=f+"px";this.cell.style.height=i+"px";this.callEvent("_onSetSize",[]);if(d!==true){this._adjustCont(j,g)}else{this._adjustAttached(j)}this._adjustProgress()};this._adjustCont=function(i,g){var h=this.cell.childNodes[this.conf.idx.cont];var f=0;for(var d in this.conf.ofs_nodes.t){var e=this.conf.ofs_nodes.t[d];f+=(e=="func"?this[d]():(e==true?this.cell.childNodes[this.conf.idx[d]].offsetHeight:0))}var j=0;for(var d in this.conf.ofs_nodes.b){var e=this.conf.ofs_nodes.b[d];j+=(e=="func"?this[d]():(e==true?this.cell.childNodes[this.conf.idx[d]].offsetHeight:0))}h.style.left="0px";h.style.top=f+"px";if(!this.conf.cells_cont){this.conf.cells_cont={};h.style.width=this.cell.offsetWidth+"px";h.style.height=Math.max(this.cell.offsetHeight-f-j,0)+"px";this.conf.cells_cont.w=parseInt(h.style.width)-h.offsetWidth;this.conf.cells_cont.h=parseInt(h.style.height)-h.offsetHeight}h.style.left="0px";h.style.top=f+"px";h.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px";h.style.height=Math.max(this.conf.size.h-f-j+this.conf.cells_cont.h,0)+"px";h=null;this._adjustAttached(i);if(g=="expand"&&this.dataType=="editor"&&this.dataObj!=null){this.dataObj._prepareContent(true)}};this._mtbUpdBorder=function(){var e=["menu","toolbar"];for(var g=0;g<e.length;g++){if(this.conf.idx[e[g]]!=null){var h=this.cell.childNodes[this.conf.idx[e[g]]];var f="dhx_cell_"+e[g]+"_no_borders";var d="dhx_cell_"+e[g]+"_def";h.className=h.className.replace(new RegExp(this.conf.borders?f:d),this.conf.borders?d:f);h=null}}};this._resetSizeState=function(){this.conf.cells_cont=null};this.conf.view="def";this.conf.views_loaded={};this.conf.views_loaded[this.conf.view]=true;this._viewSave=function(f){this.views[f]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};var g=this.cell.childNodes[this.conf.idx.cont];while(g.childNodes.length>0){this.views[f].cellCont.push(g.firstChild);g.removeChild(g.firstChild)}this.dataType=null;this.dataObj=null;for(var e in this.dataNodes){for(var d in this.conf.ofs_nodes){if(typeof(this.conf.ofs_nodes[d][e])!="undefined"){this.views[f].ofs_nodes[d][e]=this.conf.ofs_nodes[d][e];this.conf.ofs_nodes[d][e]=null;delete this.conf.ofs_nodes[d][e]}}this.views[f].dataNodesCont[e]=this.cell.childNodes[this.conf.idx[e]];this.cell.removeChild(this.cell.childNodes[this.conf.idx[e]]);this.views[f].dataNodes[e]=this.dataNodes[e];this.dataNodes[e]=null;delete this.dataNodes[e];this._updateIdx()}this.callEvent("_onViewSave",[f])};this._viewRestore=function(f){if(this.views[f]==null){return}this.dataObj=this.views[f].dataObj;this.dataType=this.views[f].dataType;for(var g=0;g<this.views[f].cellCont.length;g++){this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[f].cellCont[g])}for(var e in this.views[f].dataNodes){this.dataNodes[e]=this.views[f].dataNodes[e];if(e=="menu"){this.cell.insertBefore(this.views[f].dataNodesCont[e],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont])}if(e=="toolbar"){this.cell.insertBefore(this.views[f].dataNodesCont[e],this.cell.childNodes[this.conf.idx.cont])}if(e=="sb"){this.cell.appendChild(this.views[f].dataNodesCont[e])}this._updateIdx()}for(var e in this.views[f].ofs_nodes){for(var d in this.views[f].ofs_nodes[e]){this.conf.ofs_nodes[e][d]=this.views[f].ofs_nodes[e][d]}}if(this.conf.borders!=this.views[f].borders){this[this.views[f].borders?"_showBorders":"_hideBorders"](true)}this.callEvent("_onViewRestore",[f]);this._viewDelete(f)};this._viewDelete=function(f){if(this.views[f]==null){return}this.views[f].borders=null;for(var e in this.views[f].ofs_nodes){for(var d in this.views[f].ofs_nodes[e]){this.views[f].ofs_nodes[e][d]=null}this.views[f].ofs_nodes[e]=null}this.views[f].dataType=null;this.views[f].dataObj=null;for(var g=0;g<this.views[f].cellCont.length;g++){this.views[f].cellCont[g]=null}this.views[f].cellCont=null;for(var e in this.views[f].dataNodes){this.views[f].dataNodes[e]=null;this.views[f].dataNodesCont[e]=null}this.views[f].dataNodes=this.views[f].dataNodesCont=null;this.views[f]=null;delete this.views[f]};window.dhx4._eventable(this);this._updateIdx();return this}dhtmlXCellObject.prototype.showView=function(a){if(this.conf.view==a){return false}this._viewSave(this.conf.view);this._viewRestore(a);this._updateIdx();this._adjustCont();this.conf.view=a;var b=(typeof(this.conf.views_loaded[this.conf.view])=="undefined");this.conf.views_loaded[this.conf.view]=true;return b};dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view};dhtmlXCellObject.prototype.unloadView=function(d){if(d==this.conf.view){var e=this.conf.unloading;this.conf.unloading=true;this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachRibbon();this._detachObject(null,true);this.conf.unloading=e;if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(this.views[d]==null){return}var c=this.views[d];for(var b in c.dataNodes){if(typeof(c.dataNodes[b].unload)=="function"){c.dataNodes[b].unload()}c.dataNodes[b]=null;c.dataNodesCont[b]=null}if(c.dataType=="url"){if(c.cellCont!=null&&c.cellCont[0]!="null"){this._detachURLEvents(c.cellCont[0])}}else{if(c.dataObj!=null){if(typeof(c.dataObj.unload)=="function"){c.dataObj.unload()}else{if(typeof(c.dataObj.destructor)=="function"){c.dataObj.destructor()}}c.dataObj=null}}c=null;this._viewDelete(d);if(typeof(this.conf.views_loaded[d])!="undefined"){delete this.conf.views_loaded[d]}};dhtmlXCellObject.prototype.getId=function(){return this._idd};dhtmlXCellObject.prototype.progressOn=function(){if(this.conf.progress){return}this.conf.progress=true;var b=document.createElement("DIV");b.className="dhx_cell_progress_bar";this.cell.appendChild(b);var a=document.createElement("DIV");a.className="dhx_cell_progress_img";this.cell.appendChild(a);b=a=null;this._updateIdx();this._adjustProgress()};dhtmlXCellObject.prototype.progressOff=function(){if(!this.conf.progress){return}this.cell.childNodes[this.conf.idx.pr2].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr2]);this.cell.childNodes[this.conf.idx.pr1].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr1]);this.conf.progress=false;this._updateIdx()};dhtmlXCellObject.prototype._adjustProgress=function(){if(this.conf.idx.pr1==null){return}if(!this.conf.pr){this.conf.pr={}}var b=this.cell.childNodes[this.conf.idx.pr1];var a=this.cell.childNodes[this.conf.idx.pr2];if(!this.conf.pr.ofs){a.style.width=b.offsetWidth+"px";a.style.height=b.offsetHeight+"px";this.conf.pr.ofs={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight}}a.style.width=b.offsetWidth-this.conf.pr.ofs.w+"px";a.style.height=b.offsetHeight-this.conf.pr.ofs.h+"px";b=a=null};dhtmlXCellObject.prototype._showBorders=function(a){if(this.conf.borders){return}this.conf.borders=true;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css;this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[true]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._hideBorders=function(a){if(!this.conf.borders){return}this.conf.borders=false;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders";this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[false]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth};dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight};dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"};dhtmlXCellObject.prototype._unload=function(){this.conf.unloading=true;this.callEvent("_onCellUnload",[]);this.progressOff();this.unloadView(this.conf.view);this.dataNodes=null;this.cell.parentNode.removeChild(this.cell);this.cell=null;window.dhx4._eventable(this,"clear");for(var b in this.views){this.unloadView(b)}this.conf=null;for(var b in this){this[b]=null}};dhtmlXCellObject.prototype.attachObject=function(d,c){if(window.dhx4.s2b(c)&&!(typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof window.dhtmlXWindowsCell))){c=false}if(typeof(d)=="string"){d=document.getElementById(d)}if(d.parentNode==this.cell.childNodes[this.conf.idx.cont]){d=null;return}if(c){d.style.display="";var a=d.offsetWidth;var b=d.offsetHeight}this._attachObject(d);this.dataType="obj";d.style.display="";d=null;if(c){this._adjustByCont(a,b)}};dhtmlXCellObject.prototype.appendObject=function(a){if(typeof(a)=="string"){a=document.getElementById(a)}if(a.parentNode==this.cell.childNodes[this.conf.idx.cont]){a=null;return}if(!this.conf.append_mode){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto";this.conf.append_mode=true}this._attachObject(a,null,null,true);this.dataType="obj";a.style.display="";a=null};dhtmlXCellObject.prototype.detachObject=function(b,a){this._detachObject(null,b,a)};dhtmlXCellObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu};dhtmlXCellObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar};dhtmlXCellObject.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon};dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb};dhtmlXCellObject.prototype.getAttachedObject=function(){return this.dataObj};dhtmlXCellObject.prototype.attachURL=function(b,j,c){if(c==true){c={}}var d=(typeof(c)!="undefined"&&c!=false&&c!=null);if(!this.conf.url_data){this.conf.url_data={}}this.conf.url_data.url=b;this.conf.url_data.ajax=(j==true);this.conf.url_data.post_data=(c==true?{}:(c||null));if(j==true){var i=this;if(d){var e="";for(var h in c){e+="&"+encodeURIComponent(h)+"="+encodeURIComponent(c[h])}dhx4.ajax.post(b,e,function(a){i.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(i._doOnFrameContentLoaded)=="function"){i._doOnFrameContentLoaded()}i.dataType="url-ajax";i=a=null})}else{dhx4.ajax.get(b,function(a){i.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(i._doOnFrameContentLoaded)=="function"){i._doOnFrameContentLoaded()}i.dataType="url-ajax";i=a=null})}}else{if(this.dataType=="url"){var f=this.getFrame()}else{var f=document.createElement("IFRAME");f.frameBorder=0;f.border=0;f.style.width="100%";f.style.height="100%";f.style.position="relative";this._attachObject(f);this.dataType="url";this._attachURLEvents()}if(d){var g=(typeof(this.conf.url_data.post_ifr)=="undefined");this.conf.url_data.post_ifr=true;if(g){this._attachURLEvents()}f.src="about:blank"}else{f.src=b+(b.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime()}f=null}f=null};dhtmlXCellObject.prototype.reloadURL=function(){if(!(this.dataType=="url"||this.dataType=="url-ajax")){return}if(this.conf.url_data==null){return}this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)};dhtmlXCellObject.prototype.attachHTMLString=function(str){this._attachObject(null,null,str);var z=str.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var i=0;i<z.length;i++){var s=z[i].replace(/<([\/]{0,1})script[^>]*>/gi,"");if(s){if(window.execScript){window.execScript(s)}else{window.eval(s)}}}};dhtmlXCellObject.prototype.attachLayout=function(a){if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){}if(this instanceof dhtmlXLayoutCell){this._hideBorders()}var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);if(typeof(this._layoutMainInst)!="undefined"){b._layoutMainInst=this._layoutMainInst}if(this instanceof window.dhtmlXLayoutCell){}if(typeof(window.dhtmlXLayoutCell)!="undefined"&&this instanceof dhtmlXLayoutCell){b._isParentCell=true}if(typeof(window.dhtmlXAccordionCell)!="undefined"&&(this instanceof window.dhtmlXAccordionCell)){b._ofs={t:-1}}if(typeof(a)=="string"){a={pattern:a}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=b;this.dataType="layout";this.dataObj=new dhtmlXLayoutObject(a);if(this instanceof dhtmlXLayoutCell){this.dataObj.parentLayout=this.layout}b._layoutMainInst=null;a.parent=null;b=a=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachTree=function(a){var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);this.dataType="tree";this.dataObj=new dhtmlXTreeObject(b,"100%","100%",(a||0));this.dataObj.setSkin(this.conf.skin);this.dataObj.allTree.childNodes[0].style.marginTop="2px";this.dataObj.allTree.childNodes[0].style.marginBottom="2px";b=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachGrid=function(){var a=document.createElement("DIV");a.style.width="100%";a.style.height="100%";a.style.position="relative";a.style.overflow="hidden";this._attachObject(a);this.dataType="grid";this.dataObj=new dhtmlXGridObject(a);this.dataObj.setSkin(this.conf.skin);if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&this instanceof window.dhtmlXWindowsCell){this.dataObj.entBox.style.border="1px solid #a4bed4";this.dataObj._sizeFix=0}else{this.dataObj.entBox.style.border="0px solid white";this.dataObj._sizeFix=2}a=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachTabbar=function(a){if(typeof(window.dhtmlXLayoutCell)!="undefined"&&this instanceof dhtmlXLayoutCell){this._hideBorders()}if(typeof(a)=="string"){a={mode:a}}else{if(typeof(a)!="object"||a==null){a={}}}var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";if(typeof(window.dhtmlXAccordionCell)!="undefined"&&(this instanceof window.dhtmlXAccordionCell)){b._ofs={t:-1}}this._attachObject(b);a.skin=this.conf.skin;a.parent=b;this.dataType="tabbar";this.dataObj=new dhtmlXTabBar(a);a.parent=b=null;a=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachAccordion=function(a){if(typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){}else{if(this._isCell){this._hideBorders()}}var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";this._attachObject(b);if(typeof(a)=="undefined"){a={}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=b;if(typeof(window.dhtmlXAccordionCell)!="undefined"&&(this instanceof window.dhtmlXAccordionCell)){b._ofs={s:{first:-1},m:{first:4}}}this.dataType="acc";this.dataObj=new dhtmlXAccordion(a);a.obj=null;b=a=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachEditor=function(a){var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);if(!(typeof(a)=="object"&&a!=null)){a={}}a.parent=b;this.dataType="editor";this.dataObj=new dhtmlXEditor(a);b=null;a.parent=null;a=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachDataView=function(a){var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);if(typeof(a)=="undefined"){a={}}b.id="DataViewObject_"+new Date().getTime();a.container=b.id;a.skin=this.conf.skin;this.dataType="dataview";this.dataObj=new dhtmlXDataView(a);this.dataObj.setSizes=function(){this.render()};b=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachScheduler=function(a,g,b,d){d=d||window.scheduler;var e=false;if(b){var f=document.getElementById(b);if(f){e=true}}if(!e){var c=b||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';var f=document.createElement("DIV");f.id="dhxSchedObj_"+new Date().getTime();f.style.width="100%";f.style.height="100%";f.style.position="relative";f.style.overflow="hidden";f.className="dhx_cal_container";f.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+c+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>'}this._attachObject(f);this.dataType="scheduler";this.dataObj=d;this.dataObj.setSizes=function(){this.update_view()};d.init(f.id,a,g);f=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachForm=function(a){var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";if(window.dhtmlx&&dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(b)}else{b.style.overflow="auto"}this._attachObject(b);this.dataType="form";this.dataObj=new dhtmlXForm(b,a);this.dataObj.setSkin(this.conf.skin);b=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachMap=function(a){var b=document.createElement("DIV");b.id="GMapsObj_"+this._genStr(12);b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);if(!a){a={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}}this.dataType="maps";this.dataObj=new google.maps.Map(b,a);this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")};b=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachChart=function(a){var b=document.createElement("DIV");b.id="dhxChartObj_"+window.dhx4.newId();b.style.width="100%";b.style.height="100%";document.body.appendChild(b);this._attachObject(b);a.container=b.id;this.dataType="chart";this.dataObj=new dhtmlXChart(a);if(!this.dataObj.setSizes){this.dataObj.setSizes=function(){if(this.resize){this.resize()}else{this.render()}}}return this.dataObj};dhtmlXCellObject.prototype.attachMenu=function(a){if(this.dataNodes.menu){return}if(typeof(a)=="undefined"){a={}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=this._attachObject("menu").firstChild;this.dataNodes.menu=new dhtmlXMenuObject(a);this._adjustCont(this._idd);a.parent=null;a=null;return this.dataNodes.menu};dhtmlXCellObject.prototype.detachMenu=function(){if(!this.dataNodes.menu){return}this.dataNodes.menu.unload();this.dataNodes.menu=null;delete this.dataNodes.menu;this._detachObject("menu")};dhtmlXCellObject.prototype.showMenu=function(){this._mtbShowHide("menu","")};dhtmlXCellObject.prototype.hideMenu=function(){this._mtbShowHide("menu","none")};dhtmlXCellObject.prototype.attachToolbar=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}if(typeof(a)=="undefined"){a={}}else{if(typeof(a)=="string"){a={skin:a}}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=this._attachObject("toolbar").firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);this._adjustCont(this._idd);this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell._adjustCont()});a.parent=null;a=null;return this.dataNodes.toolbar};dhtmlXCellObject.prototype.detachToolbar=function(){if(!this.dataNodes.toolbar){return}this.dataNodes.toolbar._masterCell=null;this.dataNodes.toolbar.unload();this.dataNodes.toolbar=null;delete this.dataNodes.toolbar;this._detachObject("toolbar")};dhtmlXCellObject.prototype.showToolbar=function(){this._mtbShowHide("toolbar","")};dhtmlXCellObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbar","none")};dhtmlXCellObject.prototype.attachRibbon=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}if(typeof(a)=="undefined"){a={}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=this._attachObject("ribbon").firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(a);var b=this;this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){b._adjustCont(b._idd)});this._adjustCont();a.parent=null;a=null;return this.dataNodes.ribbon};dhtmlXCellObject.prototype.detachRibbon=function(){if(!this.dataNodes.ribbon){return}this.dataNodes.ribbon.unload();this.dataNodes.ribbon=null;delete this.dataNodes.ribbon;this._detachObject("ribbon")};dhtmlXCellObject.prototype.showRibbon=function(){this._mtbShowHide("ribbon","")};dhtmlXCellObject.prototype.hideRibbon=function(){this._mtbShowHide("ribbon","none")};dhtmlXCellObject.prototype.attachStatusBar=function(a){if(this.dataNodes.sb){return}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"}this.dataNodes.sb=this._attachObject("sb",a);this.dataNodes.sb.setText=function(b){this.childNodes[0].innerHTML=b};this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sb.onselectstart=function(b){return false};return this.dataNodes.sb};dhtmlXCellObject.prototype.detachStatusBar=function(){if(!this.dataNodes.sb){return}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")}this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null;this.dataNodes.sb=null;delete this.dataNodes.sb;this._detachObject("sb")};dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")};dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")};dhtmlXCellObject.prototype._mtbShowHide=function(b,a){if(!this.dataNodes[b]){return}this.cell.childNodes[this.conf.idx[b]].style.display=a;this._adjustCont()};dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){if(this.dataType!="url"){return null}return this.cell.childNodes[this.conf.idx.cont].firstChild};dhtmlXCellObject.prototype._genStr=function(){if(!this._genStrId){this._genStrId=new Date().getTime()}return this._genStrId++};dhtmlXCellObject.prototype._attachURLEvents=function(){if(this.dataType!="url"){return}var c=this;var b=this._idd;var a=this.cell.childNodes[this.conf.idx.cont].firstChild;if(typeof(this._doOnFrameMouseDown)!="function"){this._doOnFrameMouseDown=function(d){c.callEvent("_onContentMouseDown",[b,d||event])}}if(typeof(window.addEventListener)=="function"){a.onload=function(){try{if(typeof(c._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.addEventListener("mousedown",c._doOnFrameMouseDown,false)}}catch(d){}try{if(typeof(c._doOnFrameContentLoaded)=="function"){c._doOnFrameContentLoaded()}}catch(d){}}}else{a.onreadystatechange=function(d){if(this.readyState=="complete"){try{if(typeof(c._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.attachEvent("onmousedown",c._doOnFrameMouseDown)}}catch(f){}try{if(typeof(c._doOnFrameContentLoaded)=="function"){c._doOnFrameContentLoaded()}}catch(f){}}}}};dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(this.conf.url_data.post_ifr==true){var h=this.getFrame().contentWindow.document;var g=h.createElement("FORM");g.method="POST";g.action=this.conf.url_data.url;h.body.appendChild(g);var c={};c["dhxr"+new Date().getTime()]="1";for(var b in this.conf.url_data.post_data){c[b]=this.conf.url_data.post_data[b]}for(var b in c){var e=h.createElement("INPUT");e.type="hidden";e.name=b;e.value=c[b];g.appendChild(e);e=null}this.conf.url_data.post_ifr=false;g.submit()}else{this.callEvent("_onContentLoaded",[this._idd])}};dhtmlXCellObject.prototype._detachURLEvents=function(a){if(a==null){if(this.dataType!="url"){return}a=this.cell.childNodes[this.conf.idx.cont].firstChild}if(typeof(window.addEventListener)=="function"){a.onload=null;try{a.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,false)}catch(b){}}else{a.onreadystatechange=null;try{a.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(b){}}a=null};dhtmlXCellObject.prototype._attachObject=function(g,d,f,a,e){if(g=="menu"){if(typeof(e)!="undefined"){g=e}else{g=document.createElement("DIV");g.className="dhx_cell_menu_"+(this.conf.borders?"def":"no_borders");g.appendChild(document.createElement("DIV"))}this.cell.insertBefore(g,this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]);this.conf.ofs_nodes.t.menu=true;this._updateIdx();return g}if(g=="toolbar"){if(typeof(e)!="undefined"){g=e}else{g=document.createElement("DIV");g.className="dhx_cell_toolbar_"+(this.conf.borders?"def":"no_borders");g.appendChild(document.createElement("DIV"));g.firstChild.className="dhx_toolbar_base_18_dhx_skyblue"}this.cell.insertBefore(g,this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t.toolbar=true;this._updateIdx();return g}if(g=="ribbon"){if(typeof(e)!="undefined"){g=e}else{g=document.createElement("DIV");g.className="dhx_cell_ribbon_"+(this.conf.borders?"def":"no_borders");g.appendChild(document.createElement("DIV"))}this.cell.insertBefore(g,this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t.ribbon=true;this._updateIdx();this._adjustCont(this._idd);return g}if(g=="sb"){if(typeof(e)!="undefined"){g=e}else{var b=d||{};var i=(typeof(b.text)=="string"&&b.text.length>0?b.text:"&nbsp;");var c=(typeof(b.height)=="number"?b.height:false);var g=document.createElement("DIV");g.className="dhx_cell_statusbar_def";g.innerHTML="<div class='dhx_cell_statusbar_text'>"+i+"</div>";if(c!=false){g.firstChild.style.height=g.firstChild.style.lineHeight=c+"px"}}if(this.conf.idx.pr1!=null){this.cell.insertBefore(g,this.cell.childNodes[this.conf.idx.pr1])}else{this.cell.appendChild(g)}this.conf.ofs_nodes.b.sb=true;this._updateIdx();this._adjustCont(this._idd);return g}if(a!=true){this._detachObject(null,true,null)}if(typeof(f)=="string"){this.cell.childNodes[this.conf.idx.cont].innerHTML=f}else{this.cell.childNodes[this.conf.idx.cont].appendChild(g)}g=null};dhtmlXCellObject.prototype._detachObject=function(e,b,a){this.callEvent("_onBeforeContentDetach",[]);if(e=="menu"||e=="toolbar"||e=="ribbon"||e=="sb"){var d=this.cell.childNodes[this.conf.idx[e]];d.parentNode.removeChild(d);d=null;this.conf.ofs_nodes[e=="sb"?"b":"t"][e]=false;this._updateIdx();if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(b==true){a=false}else{if(typeof(a)=="undefined"){a=document.body}else{if(typeof(a)=="string"){a=document.getElementById(a)}}}if(a===false){if(this.dataType=="url"){this._detachURLEvents()}else{if(this.dataObj!=null){if(typeof(this.dataObj.unload)=="function"){this.dataObj.unload()}else{if(typeof(this.dataObj.destructor)=="function"){this.dataObj.destructor()}}}}}var d=this.cell.childNodes[this.conf.idx.cont];while(d.childNodes.length>0){if(a===false){d.removeChild(d.lastChild)}else{d.firstChild.style.display="none";a.appendChild(d.firstChild)}}if(this.conf.append_mode){d.style.overflow="";this.conf.append_mode=false}var c=(this.dataType=="tabbar");this.dataObj=null;this.dataType=null;a=d=null;if(this.conf.unloading!=true&&c){this.showHeader(true);this._showBorders()}};dhtmlXCellObject.prototype._attachFromCell=function(b){this.detachObject(true);var d="layout";if(typeof(window.dhtmlXWindowsCell)!="undefined"&&this instanceof window.dhtmlXWindowsCell){d="window"}if(typeof(window.dhtmlXWindowsCell)!="undefined"&&b instanceof window.dhtmlXWindowsCell&&b.wins.w[b._idd].conf.parked){b.wins._winCellSetOpacity(b._idd,"open",false)}if(typeof(window.dhtmlXAccordionCell)!="undefined"&&b instanceof window.dhtmlXAccordionCell&&b.conf.opened==false){b._cellSetOpacity("open",false)}for(var c in b.dataNodes){this._attachObject(c,null,null,null,b.cell.childNodes[b.conf.idx[c]]);this.dataNodes[c]=b.dataNodes[c];b.dataNodes[c]=null;b.conf.ofs_nodes[c=="sb"?"b":"t"][c]=false;b._updateIdx()}this._mtbUpdBorder();if(b.dataType!=null&&b.dataObj!=null){this.dataType=b.dataType;this.dataObj=b.dataObj;while(b.cell.childNodes[b.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(b.cell.childNodes[b.conf.idx.cont].firstChild)}b.dataType=null;b.dataObj=null;if(this.dataType=="grid"){if(d=="window"&&this.conf.skin=="dhx_skyblue"){this.dataObj.entBox.style.border="1px solid #a4bed4";this.dataObj._sizeFix=0}else{this.dataObj.entBox.style.border="0px solid white";this.dataObj._sizeFix=2}}}else{while(b.cell.childNodes[b.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(b.cell.childNodes[b.conf.idx.cont].firstChild)}}this.conf.view=b.conf.view;b.conf.view="def";for(var c in b.views){this.views[c]=b.views[c];b.views[c]=null;delete b.views[c]}b._updateIdx();b._adjustCont();this._updateIdx();this._adjustCont();if(d=="window"&&this.wins.w[this._idd].conf.parked){this.wins._winCellSetOpacity(this._idd,"close",false)}};function dhtmlXToolbarObject(b,c){var a=this;this.conf={skin:(c||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtoolbar")||"dhx_skyblue"),align:"left",align_autostart:"left",icons_path:"",iconSize:18,sel_ofs_x:0,sel_ofs_y:0,xml_autoload:null,items_autoload:null};if(typeof(b)=="object"&&b!=null&&typeof(b.tagName)=="undefined"){if(b.icons_path!=null||b.icon_path!=null){this.conf.icons_path=(b.icons_path||b.icon_path)}if(b.icons_size!=null){this.conf.icons_size_autoload=b.icons_size}if(b.json!=null){this.conf.json_autoload=b.json}if(b.xml!=null){this.conf.xml_autoload=b.xml}if(b.onload!=null){this.conf.onload_autoload=b.onload}if(b.items!=null){this.conf.items_autoload=b.items}if(b.skin!=null){this.conf.skin=b.skin}if(b.align!=null){this.conf.align_autostart=b.align}b=b.parent}this.cont=(typeof(b)!="object")?document.getElementById(b):b;while(this.cont.childNodes.length>0){this.cont.removeChild(this.cont.childNodes[0])}b=null;this.cont.dir="ltr";this.base=document.createElement("DIV");this.base.className="dhxtoolbar_float_left";this.cont.appendChild(this.base);if(window.dhx4.isIPad){this.cont.ontouchstart=function(d){d=d||event;if((String(d.target.tagName||"").toLowerCase()=="input")){return true}if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}d.cancelBubble=true;return false}}this.setSkin(this.conf.skin);this.objPull={};this.anyUsed="none";this._genStr=function(d){var e="";var g="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var f=0;f<d;f++){e+=g.charAt(Math.round(Math.random()*(g.length-1)))}return e};this.rootTypes=new Array("button","buttonSelect","buttonTwoState","separator","label","slider","text","buttonInput");this.idPrefix=this._genStr(12);window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson","toolbar",{struct:true});window.dhx4._eventable(this);this._getObj=function(g,d){var e=null;for(var f=0;f<g.childNodes.length;f++){if(g.childNodes[f].tagName!=null){if(String(g.childNodes[f].tagName).toLowerCase()==String(d).toLowerCase()){e=g.childNodes[f]}}}return e};this._addImgObj=function(e){var d=document.createElement("IMG");if(e.childNodes.length>0){e.insertBefore(d,e.childNodes[0])}else{e.appendChild(d)}return d};this._setItemImage=function(g,e,d){if(d==true){g.imgEn=e}else{g.imgDis=e}if((!g.state&&d==true)||(g.state&&d==false)){return}var f=this._getObj(g.obj,"img");if(f==null){f=this._addImgObj(g.obj)}f.src=this.conf.icons_path+e};this._clearItemImage=function(f,d){if(d==true){f.imgEn=""}else{f.imgDis=""}if((!f.state&&d==true)||(f.state&&d==false)){return}var e=this._getObj(f.obj,"img");if(e!=null){e.parentNode.removeChild(e)}};this._setItemText=function(d,f){var e=this._getObj(d.obj,"div");if(f==null||f.length==0){if(e!=null){e.parentNode.removeChild(e)}return}if(e==null){e=document.createElement("DIV");e.className="dhxtoolbar_text";d.obj.appendChild(e)}e.innerHTML=f};this._getItemText=function(d){var e=this._getObj(d.obj,"div");if(e!=null){return e.innerHTML}return""};this._enableItem=function(e){if(e.state){return}e.state=true;if(this.objPull[e.id]["type"]=="buttonTwoState"&&this.objPull[e.id]["obj"]["pressed"]==true){e.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres";e.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}else{e.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";e.obj.renderAs=e.obj.className}if(e.arw){e.arw.className=String(e.obj.className).replace("btn","arw")}var d=this._getObj(e.obj,"img");if(e.imgEn!=""){if(d==null){d=this._addImgObj(e.obj)}d.src=this.conf.icons_path+e.imgEn}else{if(d!=null){d.parentNode.removeChild(d)}}};this._disableItem=function(e){if(!e.state){return}e.state=false;e.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.objPull[e.id]["type"]=="buttonTwoState"&&e.obj.pressed?"pres_":"")+"dis";e.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";if(e.arw){e.arw.className=String(e.obj.className).replace("btn","arw")}var d=this._getObj(e.obj,"img");if(e.imgDis!=""){if(d==null){d=this._addImgObj(e.obj)}d.src=this.conf.icons_path+e.imgDis}else{if(d!=null){d.parentNode.removeChild(d)}}if(e.polygon!=null){if(e.polygon.style.display!="none"){window.dhx4.zim.clear(e.polygon._idd);e.polygon.style.display="none";if(e.polygon._ie6cover){e.polygon._ie6cover.style.display="none"}if(this.conf.skin=="dhx_terrace"){this._improveTerraceButtonSelect(e.id,true)}}}this.anyUsed="none"};this.clearAll=function(){for(var d in this.objPull){this._removeItem(String(d).replace(this.idPrefix,""))}};this._doOnClick=function(d){if(a&&a.forEachItem){a.forEachItem(function(f){if(a.objPull[a.idPrefix+f]["type"]=="buttonSelect"){var e=a.objPull[a.idPrefix+f];if(e.arw._skip===true){e.arw._skip=false}else{if(e.polygon.style.display!="none"){e.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";e.obj.className=e.obj.renderAs;e.arw.className=String(e.obj.renderAs).replace("btn","arw");a.anyUsed="none";window.dhx4.zim.clear(e.polygon._idd);e.polygon.style.display="none";if(e.polygon._ie6cover){e.polygon._ie6cover.style.display="none"}if(a.conf.skin=="dhx_terrace"){a._improveTerraceButtonSelect(e.id,true)}}}}})}};if(window.dhx4.isIPad){document.addEventListener("touchstart",this._doOnClick,false)}else{if(typeof(window.addEventListener)!="undefined"){window.addEventListener("mousedown",this._doOnClick,false)}else{document.body.attachEvent("onmousedown",this._doOnClick)}}if(this.conf.icons_size_autoload!=null){this.setIconSize(this.conf.icons_size_autoload);this.conf.icons_size_autoload=null}if(this.conf.items_autoload!=null){this.loadStruct(this.conf.items_autoload,this.conf.onload_autoload);this.conf.items_autoload=null}else{if(this.conf.json_autoload!=null){this.loadStruct(this.conf.json_autoload,this.conf.onload_autoload);this.conf.json_autoload=null}else{if(this.conf.xml_autoload!=null){this.loadStruct(this.conf.xml_autoload,this.conf.onload_autoload);this.conf.xml_autoload=null}}}if(this.conf.align_autostart!=this.conf.align){this.setAlign(this.conf.align_autostart);this.conf.align_autostart=null}return this}dhtmlXToolbarObject.prototype.addSpacer=function(c){var b=this.idPrefix+c;if(this._spacer!=null){if(this._spacer.idd==c){return}if(this._spacer==this.objPull[b].obj.parentNode){var a=true;while(a){var g=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]);if(g==c||this._spacer.childNodes.length==0){if(this.objPull[b].arw!=null){this.base.appendChild(this.objPull[b].arw)}a=false}}this._spacer.idd=c;this._fixSpacer();return}if(this.base==this.objPull[b].obj.parentNode){var a=true;var f=(this.objPull[b].arw!=null);while(a){var d=this.base.childNodes.length-1;if(f==true){if(this.base.childNodes[d]==this.objPull[b].arw){a=false}}if(this.base.childNodes[d].idd==c){a=false}if(a){if(this._spacer.childNodes.length>0){this._spacer.insertBefore(this.base.childNodes[d],this._spacer.childNodes[0])}else{this._spacer.appendChild(this.base.childNodes[d])}}}this._spacer.idd=c;this._fixSpacer();return}}else{var e=null;for(var d=0;d<this.base.childNodes.length;d++){if(this.base.childNodes[d]==this.objPull[this.idPrefix+c].obj){e=d;if(this.objPull[this.idPrefix+c].arw!=null){e=d+1}}}if(e!=null){this._spacer=document.createElement("DIV");this._spacer.className=(this.conf.align=="right"?" dhxtoolbar_float_left":" dhxtoolbar_float_right");this._spacer.dir="ltr";this._spacer.idd=c;while(this.base.childNodes.length>e+1){this._spacer.appendChild(this.base.childNodes[e+1])}this.cont.appendChild(this._spacer);this._fixSpacer()}}if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.removeSpacer=function(){if(!this._spacer){return}while(this._spacer.childNodes.length>0){this.base.appendChild(this._spacer.childNodes[0])}this._spacer.parentNode.removeChild(this._spacer);this._spacer=null;if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._fixSpacer=function(){if(typeof(window.addEventListener)=="undefined"&&this._spacer!=null){this._spacer.style.borderLeft="1px solid #a4bed4";var a=this._spacer;window.setTimeout(function(){a.style.borderLeft="0px solid #a4bed4";a=null},1)}};dhtmlXToolbarObject.prototype.getType=function(c){var d=this.getParentId(c);if(d!=null){var b=null;var a=this.objPull[this.idPrefix+d]._listOptions[c];if(a!=null){if(a.sep!=null){b="buttonSelectSeparator"}else{b="buttonSelectButton"}}return b}else{if(this.objPull[this.idPrefix+c]==null){return null}return this.objPull[this.idPrefix+c]["type"]}};dhtmlXToolbarObject.prototype.getTypeExt=function(b){var a=this.getType(b);if(a=="buttonSelectButton"||a=="buttonSelectSeparator"){if(a=="buttonSelectButton"){a="button"}else{a="separator"}return a}return null};dhtmlXToolbarObject.prototype.inArray=function(c,b){for(var a=0;a<c.length;a++){if(c[a]==b){return true}}return false};dhtmlXToolbarObject.prototype.getParentId=function(e){var f=null;for(var d in this.objPull){if(this.objPull[d]._listOptions){for(var c in this.objPull[d]._listOptions){if(c==e){f=String(d).replace(this.idPrefix,"")}}}}return f};dhtmlXToolbarObject.prototype._addItem=function(a,b){this._addItemToStorage(a,b);if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.addButton=function(e,d,b,a,c){this._addItem({id:e,type:"button",text:b,img:a,imgdis:c},d)};dhtmlXToolbarObject.prototype.addText=function(c,b,a){this._addItem({id:c,type:"text",text:a},b)};dhtmlXToolbarObject.prototype.addButtonSelect=function(d,h,k,a,b,i,g,m,e,f){var l=[];for(var c=0;c<a.length;c++){var j={};if(a[c] instanceof Array){j.id=a[c][0];j.type=(a[c][1]=="obj"?"button":"separator");j.text=(a[c][2]||null);j.img=(a[c][3]||null)}else{if(a[c] instanceof Object&&a[c]!=null&&typeof(a[c].id)!="undefined"&&typeof(a[c].type)!="undefined"){j.id=a[c].id;j.type=(a[c].type=="obj"?"button":"separator");j.text=a[c].text;j.img=a[c].img}}l.push(j)}this._addItem({id:d,type:"buttonSelect",text:k,img:b,imgdis:i,renderSelect:g,openAll:m,options:l,maxOpen:e,mode:f},h)};dhtmlXToolbarObject.prototype.addButtonTwoState=function(e,d,b,a,c){this._addItem({id:e,type:"buttonTwoState",img:a,imgdis:c,text:b},d)};dhtmlXToolbarObject.prototype.addSeparator=function(b,a){this._addItem({id:b,type:"separator"},a)};dhtmlXToolbarObject.prototype.addSlider=function(b,g,e,d,i,c,f,a,h){this._addItem({id:b,type:"slider",length:e,valueMin:d,valueMax:i,valueNow:c,textMin:f,textMax:a,toolTip:h},g)};dhtmlXToolbarObject.prototype.addInput=function(d,c,b,a){this._addItem({id:d,type:"buttonInput",value:b,width:a},c)};dhtmlXToolbarObject.prototype.forEachItem=function(c){for(var b in this.objPull){if(this.inArray(this.rootTypes,this.objPull[b]["type"])){c(this.objPull[b]["id"].replace(this.idPrefix,""))}}};(function(){var f="isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen".split(",");var c=[false,"","",false,"","","","","","","","","",false,"","","",null,"",[null,null],"",[null,null],"",null];var b=function(g,h){return function(k,j,i){k=this.idPrefix+k;if(this.objPull[k][g]!=null){return this.objPull[k][g].call(this.objPull[k],j,i)}else{return h}}};for(var e=0;e<f.length;e++){var a=f[e];var d=c[e];dhtmlXToolbarObject.prototype[a]=b(a,d)}})();dhtmlXToolbarObject.prototype.showItem=function(a){a=this.idPrefix+a;if(this.objPull[a]!=null&&this.objPull[a].showItem!=null){this.objPull[a].showItem();if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}}};dhtmlXToolbarObject.prototype.hideItem=function(a){a=this.idPrefix+a;if(this.objPull[a]!=null&&this.objPull[a].hideItem!=null){this.objPull[a].hideItem();if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}}};dhtmlXToolbarObject.prototype.getPosition=function(a){return this._getPosition(a)};dhtmlXToolbarObject.prototype._getPosition=function(e,c){if(this.objPull[this.idPrefix+e]==null){return null}var d=null;var a=0;for(var b=0;b<this.base.childNodes.length;b++){if(this.base.childNodes[b].idd!=null){if(this.base.childNodes[b].idd==e){d=a}a++}}if(!d&&this._spacer!=null){for(var b=0;b<this._spacer.childNodes.length;b++){if(this._spacer.childNodes[b].idd!=null){if(this._spacer.childNodes[b].idd==e){d=a}a++}}}return d};dhtmlXToolbarObject.prototype.setPosition=function(a,b){this._setPosition(a,b)};dhtmlXToolbarObject.prototype._setPosition=function(e,d){if(this.objPull[this.idPrefix+e]==null){return}if(isNaN(d)){d=this.base.childNodes.length}if(d<0){d=0}var a=null;if(this._spacer){a=this._spacer.idd;this.removeSpacer()}var c=this.objPull[this.idPrefix+e];this.base.removeChild(c.obj);if(c.arw){this.base.removeChild(c.arw)}var b=this._getIdByPosition(d,true);if(b[0]==null){this.base.appendChild(c.obj);if(c.arw){this.base.appendChild(c.arw)}}else{this.base.insertBefore(c.obj,this.base.childNodes[b[1]]);if(c.arw){this.base.insertBefore(c.arw,this.base.childNodes[b[1]+1])}}if(a!=null){this.addSpacer(a)}};dhtmlXToolbarObject.prototype._getIdByPosition=function(f,b){var e=null;var a=0;var c=0;for(var d=0;d<this.base.childNodes.length;d++){if(this.base.childNodes[d]["idd"]!=null&&e==null){if((a++)==f){e=this.base.childNodes[d]["idd"]}}if(e==null){c++}}c=(e==null?null:c);return(b==true?new Array(e,c):e)};dhtmlXToolbarObject.prototype.removeItem=function(a){this._removeItem(a);if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._removeItem=function(e){var c=this.getType(e);e=this.idPrefix+e;var d=this.objPull[e];if(c=="button"){d.obj._doOnMouseOver=null;d.obj._doOnMouseOut=null;d.obj._doOnMouseUp=null;d.obj._doOnMouseUpOnceAnywhere=null;d.obj.onclick=null;d.obj.onmouseover=null;d.obj.onmouseout=null;d.obj.onmouseup=null;d.obj.onmousedown=null;d.obj.onselectstart=null;d.obj.renderAs=null;d.obj.idd=null;d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.state=null;d.img=null;d.imgEn=null;d.imgDis=null;d.type=null;d.enableItem=null;d.disableItem=null;d.isEnabled=null;d.showItem=null;d.hideItem=null;d.isVisible=null;d.setItemText=null;d.getItemText=null;d.setItemImage=null;d.clearItemImage=null;d.setItemImageDis=null;d.clearItemImageDis=null;d.setItemToolTip=null;d.getItemToolTip=null}if(c=="buttonTwoState"){d.obj._doOnMouseOver=null;d.obj._doOnMouseOut=null;d.obj.onmouseover=null;d.obj.onmouseout=null;d.obj.onmousedown=null;d.obj.onselectstart=null;d.obj.renderAs=null;d.obj.idd=null;d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.state=null;d.img=null;d.imgEn=null;d.imgDis=null;d.type=null;d.enableItem=null;d.disableItem=null;d.isEnabled=null;d.showItem=null;d.hideItem=null;d.isVisible=null;d.setItemText=null;d.getItemText=null;d.setItemImage=null;d.clearItemImage=null;d.setItemImageDis=null;d.clearItemImageDis=null;d.setItemToolTip=null;d.getItemToolTip=null;d.setItemState=null;d.getItemState=null}if(c=="buttonSelect"){for(var b in d._listOptions){this.removeListOption(e,b)}d._listOptions=null;if(d.polygon._ie6cover){document.body.removeChild(d.polygon._ie6cover);d.polygon._ie6cover=null}d.p_tbl.removeChild(d.p_tbody);d.polygon.removeChild(d.p_tbl);d.polygon.onselectstart=null;document.body.removeChild(d.polygon);d.p_tbody=null;d.p_tbl=null;d.polygon=null;d.obj.onclick=null;d.obj.onmouseover=null;d.obj.onmouseout=null;d.obj.onmouseup=null;d.obj.onmousedown=null;d.obj.onselectstart=null;d.obj.idd=null;d.obj.iddPrefix=null;d.obj.parentNode.removeChild(d.obj);d.obj=null;d.arw.onclick=null;d.arw.onmouseover=null;d.arw.onmouseout=null;d.arw.onmouseup=null;d.arw.onmousedown=null;d.arw.onselectstart=null;d.arw.parentNode.removeChild(d.arw);d.arw=null;d.renderSelect=null;d.state=null;d.type=null;d.id=null;d.img=null;d.imgEn=null;d.imgDis=null;d.openAll=null;d._isListButton=null;d._separatorButtonSelectObject=null;d._buttonButtonSelectObject=null;d.setWidth=null;d.enableItem=null;d.disableItem=null;d.isEnabled=null;d.showItem=null;d.hideItem=null;d.isVisible=null;d.setItemText=null;d.getItemText=null;d.setItemImage=null;d.clearItemImage=null;d.setItemImageDis=null;d.clearItemImageDis=null;d.setItemToolTip=null;d.getItemToolTip=null;d.addListOption=null;d.removeListOption=null;d.showListOption=null;d.hideListOption=null;d.isListOptionVisible=null;d.enableListOption=null;d.disableListOption=null;d.isListOptionEnabled=null;d.setListOptionPosition=null;d.getListOptionPosition=null;d.setListOptionImage=null;d.getListOptionImage=null;d.clearListOptionImage=null;d.setListOptionText=null;d.getListOptionText=null;d.setListOptionToolTip=null;d.getListOptionToolTip=null;d.forEachListOption=null;d.getAllListOptions=null;d.setListOptionSelected=null;d.getListOptionSelected=null}if(c=="buttonInput"){d.obj.childNodes[0].onkeydown=null;d.obj.removeChild(d.obj.childNodes[0]);d.obj.w=null;d.obj.idd=null;d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.type=null;d.enableItem=null;d.disableItem=null;d.isEnabled=null;d.showItem=null;d.hideItem=null;d.isVisible=null;d.setItemToolTip=null;d.getItemToolTip=null;d.setWidth=null;d.getWidth=null;d.setValue=null;d.getValue=null;d.setItemText=null;d.getItemText=null}if(c=="slider"){if(window.dhx4.isIPad){document.removeEventListener("touchmove",pen._doOnMouseMoveStart,false);document.removeEventListener("touchend",pen._doOnMouseMoveEnd,false)}else{if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",d.pen._doOnMouseMoveStart,false);window.removeEventListener("mouseup",d.pen._doOnMouseMoveEnd,false)}else{document.body.detachEvent("onmousemove",d.pen._doOnMouseMoveStart);document.body.detachEvent("onmouseup",d.pen._doOnMouseMoveEnd)}}d.pen.allowMove=null;d.pen.initXY=null;d.pen.maxX=null;d.pen.minX=null;d.pen.nowX=null;d.pen.newNowX=null;d.pen.valueMax=null;d.pen.valueMin=null;d.pen.valueNow=null;d.pen._definePos=null;d.pen._detectLimits=null;d.pen._doOnMouseMoveStart=null;d.pen._doOnMouseMoveEnd=null;d.pen.onmousedown=null;d.obj.removeChild(d.pen);d.pen=null;d.label.tip=null;document.body.removeChild(d.label);d.label=null;d.obj.onselectstart=null;d.obj.idd=null;while(d.obj.childNodes.length>0){d.obj.removeChild(d.obj.childNodes[0])}d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.type=null;d.state=null;d.enableItem=null;d.disableItem=null;d.isEnabled=null;d.setItemToolTipTemplate=null;d.getItemToolTipTemplate=null;d.setMaxValue=null;d.setMinValue=null;d.getMaxValue=null;d.getMinValue=null;d.setValue=null;d.getValue=null;d.showItem=null;d.hideItem=null;d.isVisible=null}if(c=="separator"){d.obj.onselectstart=null;d.obj.idd=null;d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.type=null;d.showItem=null;d.hideItem=null;d.isVisible=null}if(c=="text"){d.obj.onselectstart=null;d.obj.idd=null;d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.type=null;d.showItem=null;d.hideItem=null;d.isVisible=null;d.setWidth=null;d.setItemText=null;d.getItemText=null}c=null;d=null;this.objPull[this.idPrefix+e]=null;delete this.objPull[this.idPrefix+e]};(function(){var d="addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected".split(",");var b=function(e){return function(k,g,f,j,i,h){k=this.idPrefix+k;if(this.objPull[k]==null){return}if(this.objPull[k]["type"]!="buttonSelect"){return}return this.objPull[k][e].call(this.objPull[k],g,f,j,i,h)}};for(var c=0;c<d.length;c++){var a=d[c];dhtmlXToolbarObject.prototype[a]=b(a)}})();dhtmlXToolbarObject.prototype._rtlParseBtn=function(b,a){return b+a};dhtmlXToolbarObject.prototype._separatorObject=function(a,c,b){this.id=a.idPrefix+c;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_sep";this.obj.style.display=(b.hidden!=null?"none":"");this.obj.idd=String(c);this.obj.title=(b.title||"");this.obj.onselectstart=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}};if(window.dhx4.isIPad){this.obj.ontouchstart=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}d.cancelBubble=true;return false}}a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};return this};dhtmlXToolbarObject.prototype._textObject=function(a,c,b){this.id=a.idPrefix+c;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_text";this.obj.style.display=(b.hidden!=null?"none":"");this.obj.idd=String(c);this.obj.title=(b.title||"");this.obj.onselectstart=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}};if(window.dhx4.isIPad){this.obj.ontouchstart=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}d.cancelBubble=true;return false}}this.obj.innerHTML=(b.text||"");a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(d){this.obj.innerHTML=d};this.getItemText=function(){return this.obj.innerHTML};this.setWidth=function(d){this.obj.style.width=d+"px"};this.setItemToolTip=function(d){this.obj.title=d};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonObject=function(a,d,b){this.id=a.idPrefix+d;this.state=(b.enabled!=null?false:true);this.imgEn=(b.img||"");this.imgDis=(b.imgdis||"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(b.hidden!=null?"none":"");this.obj.allowClick=false;this.obj.extAction=(b.action||null);this.obj.renderAs=this.obj.className;this.obj.idd=String(d);this.obj.title=(b.title||"");this.obj.pressed=false;this.obj.innerHTML=a._rtlParseBtn((this.img!=""?"<img src='"+a.conf.icons_path+this.img+"'>":""),(b.text!=null?"<div class='dhxtoolbar_text'>"+b.text+"</div>":""));var c=this;this.obj.onselectstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};this.obj._doOnMouseOver=function(){this.allowClick=true;if(c.state==false){return}if(a.anyUsed!="none"){return}this.className="dhx_toolbar_btn dhxtoolbar_btn_over";this.renderAs=this.className};this.obj._doOnMouseOut=function(){this.allowClick=false;if(c.state==false){return}if(a.anyUsed!="none"){return}this.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.renderAs=this.renderAs};this.obj.onclick=function(f){if(c.state==false){return}if(this.allowClick==false){return}f=f||event;var g=this.idd.replace(a.idPrefix,"");if(this.extAction){try{window[this.extAction](g)}catch(f){}}if(a&&a.callEvent){a.callEvent("onClick",[g])}};this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(f){if(c.state==false){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}f.cancelBubble=true;return false}if(a.anyUsed!="none"){return}a.anyUsed=this.idd;this.className="dhx_toolbar_btn dhxtoolbar_btn_pres";this.pressed=true;this.onmouseover=function(){this._doOnMouseOver()};this.onmouseout=function(){a.anyUsed="none";this._doOnMouseOut()};return false};this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(g){if(c.state==false){return}if(a.anyUsed!="none"){if(a.anyUsed!=this.idd){return}}var f=a.anyUsed;this._doOnMouseUp();if(window.dhx4.isIPad&&f!="none"){a.callEvent("onClick",[this.idd.replace(a.idPrefix,"")])}};if(window.dhx4.isIPad){this.obj.ontouchmove=function(f){this._doOnMouseUp()}}this.obj._doOnMouseUp=function(){a.anyUsed="none";this.className=this.renderAs;this.pressed=false};this.obj._doOnMouseUpOnceAnywhere=function(){this._doOnMouseUp();this.onmouseover=function(){this._doOnMouseOver()};this.onmouseout=function(){this._doOnMouseOut()}};a.base.appendChild(this.obj);this.enableItem=function(){a._enableItem(this)};this.disableItem=function(){a._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(e){a._setItemText(this,e)};this.getItemText=function(){return a._getItemText(this)};this.setItemImage=function(e){a._setItemImage(this,e,true)};this.clearItemImage=function(){a._clearItemImage(this,true)};this.setItemImageDis=function(e){a._setItemImage(this,e,false)};this.clearItemImageDis=function(){a._clearItemImage(this,false)};this.setItemToolTip=function(e){this.obj.title=e};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonSelectObject=function(c,f,e){this.id=c.idPrefix+f;this.state=(e.enabled!=null?(e.enabled=="true"?true:false):true);this.imgEn=(e.img||"");this.imgDis=(e.imgdis||"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.mode=(e.mode||"button");if(this.mode=="select"){this.openAll=true;this.renderSelect=false;if(!e.text||e.text.length==0){e.text="&nbsp;"}}else{this.openAll=(window.dhx4.s2b(e.openAll)==true);this.renderSelect=(e.renderSelect==null?true:window.dhx4.s2b(e.renderSelect))}this.maxOpen=(!isNaN(e.maxOpen?e.maxOpen:"")?e.maxOpen:null);this._maxOpenTest=function(){if(!isNaN(this.maxOpen)){if(!c._sbw){var h=document.createElement("DIV");h.className="dhxtoolbar_maxopen_test";document.body.appendChild(h);var g=document.createElement("DIV");g.className="dhxtoolbar_maxopen_test2";h.appendChild(g);c._sbw=h.offsetWidth-g.offsetWidth;h.removeChild(g);g=null;document.body.removeChild(h);h=null}}};this._maxOpenTest();this.obj=document.createElement("DIV");this.obj.allowClick=false;this.obj.extAction=(e.action||null);this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(e.hidden!=null?"none":"");this.obj.renderAs=this.obj.className;this.obj.onselectstart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}};this.obj.idd=String(f);this.obj.title=(e.title||"");this.obj.pressed=false;this.callEvent=false;this.obj.innerHTML=c._rtlParseBtn((this.img!=""?"<img src='"+c.conf.icons_path+this.img+"'>":""),(e.text!=null?"<div class='dhxtoolbar_text'>"+e.text+"</div>":""));c.base.appendChild(this.obj);this.arw=document.createElement("DIV");this.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(this.state?"def":"dis");this.arw.style.display=this.obj.style.display;this.arw.innerHTML="<div class='arwimg'>&nbsp;</div>";this.arw.title=this.obj.title;this.arw.onselectstart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}};c.base.appendChild(this.arw);var a=this;this.obj.onmouseover=function(g){g=g||event;if(c.anyUsed!="none"){return}if(!a.state){return}a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over";a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw")};this.obj.onmouseout=function(){a.obj.allowClick=false;if(c.anyUsed!="none"){return}if(!a.state){return}a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");a.callEvent=false};this.arw.onmouseover=this.obj.onmouseover;this.arw.onmouseout=this.obj.onmouseout;if(this.openAll==true){}else{this.obj.onclick=function(g){g=g||event;if(!a.obj.allowClick){return}if(!a.state){return}if(c.anyUsed!="none"){return}var h=a.obj.idd.replace(c.idPrefix,"");if(a.obj.extAction){try{window[a.obj.extAction](h)}catch(g){}}c.callEvent("onClick",[h])};this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(g){g=g||event;if(c.anyUsed!="none"){return}if(!a.state){return}a.obj.allowClick=true;a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres";a.callEvent=true};this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(g){g=g||event;g.cancelBubble=true;if(c.anyUsed!="none"){return}if(!a.state){return}a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");if(window.dhx4.isIPad&&a.callEvent){var h=a.obj.idd.replace(c.idPrefix,"");c.callEvent("onClick",[h])}}}if(window.dhx4.isIPad){this.obj.ontouchmove=this.obj.onmouseout}this.arw[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(i){i=i||event;var o=(this.className.indexOf("dhx_toolbar_arw")===0?this:this.nextSibling);if(o._skip){i=i||event;i.cancelBubble=true}else{o._skip=true}o=null;if(!a.state){return}if(c.anyUsed==a.obj.idd){a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");c.anyUsed="none";window.dhx4.zim.clear(a.polygon._idd);a.polygon.style.display="none";if(a.polygon._ie6cover){a.polygon._ie6cover.style.display="none"}if(c.conf.skin=="dhx_terrace"){c._improveTerraceButtonSelect(a.id,true)}}else{if(c.anyUsed!="none"){if(c.objPull[c.idPrefix+c.anyUsed]["type"]=="buttonSelect"){var n=c.objPull[c.idPrefix+c.anyUsed];if(n.polygon.style.display!="none"){n.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";n.obj.className=n.obj.renderAs;n.arw.className=String(a.obj.renderAs).replace("btn","arw");window.dhx4.zim.clear(n.polygon._idd);n.polygon.style.display="none";if(n.polygon._ie6cover){n.polygon._ie6cover.style.display="none"}if(c.conf.skin=="dhx_terrace"){c._improveTerraceButtonSelect(n.id,true)}}}}a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres";c.anyUsed=a.obj.idd;a.polygon.style.top="0px";a.polygon.style.visibility="hidden";a.polygon.style.zIndex=window.dhx4.zim.reserve(a.polygon._idd);a.polygon.style.display="";if(c.conf.skin=="dhx_terrace"){c._improveTerraceButtonSelect(a.id,false)}a._fixMaxOpenHeight(a.maxOpen||null);c._autoDetectVisibleArea();var j=window.dhx4.absTop(a.obj)+a.obj.offsetHeight+c.conf.sel_ofs_y;var l=a.polygon.offsetHeight;if(j+l>c.tY2){var k=(a.maxOpen!=null?Math.floor((c.tY2-j)/22):0);if(k>=1){a._fixMaxOpenHeight(k)}else{j=window.dhx4.absTop(a.obj)-l-c.conf.sel_ofs_y;if(j<0){j=0}}}a.polygon.style.top=j+"px";if(c.rtl){a.polygon.style.left=window.dhx4.absLeft(a.obj)+a.obj.offsetWidth-a.polygon.offsetWidth+c.conf.sel_ofs_x+"px"}else{var h=document.body.scrollLeft;var g=h+(window.innerWidth||document.body.clientWidth);var m=window.dhx4.absLeft(a.obj)+c.conf.sel_ofs_x;if(m+a.polygon.offsetWidth>g){m=window.dhx4.absLeft(a.arw)+a.arw.offsetWidth-a.polygon.offsetWidth}a.polygon.style.left=Math.max(m,5)+"px"}a.polygon.style.visibility="visible";if(a.polygon._ie6cover){a.polygon._ie6cover.style.left=a.polygon.style.left;a.polygon._ie6cover.style.top=a.polygon.style.top;a.polygon._ie6cover.style.width=a.polygon.offsetWidth+"px";a.polygon._ie6cover.style.height=a.polygon.offsetHeight+"px";a.polygon._ie6cover.style.display=""}}return false};this.arw.onclick=function(g){g=g||event;g.cancelBubble=true};this.arw[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(g){g=g||event;g.cancelBubble=true};if(this.openAll===true){this.obj.onclick=this.arw.onclick;this.obj.onmousedown=this.arw.onmousedown;this.obj.onmouseup=this.arw.onmouseup;if(window.dhx4.isIPad){this.obj.ontouchstart=this.arw.ontouchstart;this.obj.ontouchend=this.arw.ontouchend}}this.obj.iddPrefix=c.idPrefix;this._listOptions={};this._fixMaxOpenHeight=function(l){var k="auto";var j=false;if(l!==null){var i=0;for(var g in this._listOptions){i++}if(i>l){this._ph=22*l;k=this._ph+"px"}else{j=true}}this.polygon.style.width="auto";this.polygon.style.height="auto";if(!j&&a.maxOpen!=null){this.polygon.style.width=this.p_tbl.offsetWidth+c._sbw+"px";this.polygon.style.height=k}};this._separatorButtonSelectObject=function(i,g,h){this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.className="tr_sep";this.obj.tr.onselectstart=function(j){j=j||event;if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}return false};this.obj.td=document.createElement("TD");this.obj.td.colSpan="2";this.obj.td.className="td_btn_sep";this.obj.td.onselectstart=function(j){j=j||event;if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}return false};if(isNaN(h)){h=a.p_tbody.childNodes.length+1}else{if(h<1){h=1}}if(h>a.p_tbody.childNodes.length){a.p_tbody.appendChild(this.obj.tr)}else{a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[h-1])}this.obj.tr.appendChild(this.obj.td);this.obj.sep=document.createElement("DIV");this.obj.sep.className="btn_sep";this.obj.sep.onselectstart=function(j){j=j||event;if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}return false};this.obj.td.appendChild(this.obj.sep);a._listOptions[i]=this.obj;return this};this._buttonButtonSelectObject=function(k,i,j){var h=true;if(typeof(i.enabled)!="undefined"){h=window.dhx4.s2b(i.enabled)}else{if(typeof(i.disabled)!="undefined"){h=window.dhx4.s2b(i.disabled)}}this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.en=h;this.obj.tr.extAction=(i.action||null);this.obj.tr._selected=(i.selected!=null);this.obj.tr.className="tr_btn"+(this.obj.tr.en?(this.obj.tr._selected&&a.renderSelect?" tr_btn_selected":""):" tr_btn_disabled");this.obj.tr.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};this.obj.tr.idd=String(k);if(isNaN(j)){j=a.p_tbody.childNodes.length+1}else{if(j<1){j=1}}if(j>a.p_tbody.childNodes.length){a.p_tbody.appendChild(this.obj.tr)}else{a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[j-1])}this.obj.td_a=document.createElement("TD");this.obj.td_a.className="td_btn_img";this.obj.td_a.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};this.obj.td_b=document.createElement("TD");this.obj.td_b.className="td_btn_txt";this.obj.td_b.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};if(c.rtl){this.obj.tr.appendChild(this.obj.td_b);this.obj.tr.appendChild(this.obj.td_a)}else{this.obj.tr.appendChild(this.obj.td_a);this.obj.tr.appendChild(this.obj.td_b)}if(i.img!=null){this.obj.td_a.innerHTML="<img class='btn_sel_img' src='"+c.conf.icons_path+i.img+"' border='0'>";this.obj.tr._img=i.img}else{this.obj.td_a.innerHTML="&nbsp;"}var g=(i.text!=null?i.text:(i.itemText||""));this.obj.td_b.innerHTML="<div class='btn_sel_text'>"+g+"</div>";this.obj.tr[window.dhx4.isIPad?"ontouchstart":"onmouseover"]=function(){if(!this.en||(this._selected&&a.renderSelect)){return}this.className="tr_btn tr_btn_over"};this.obj.tr.onmouseout=function(){if(!this.en){return}if(this._selected&&a.renderSelect){if(String(this.className).search("tr_btn_selected")==-1){this.className="tr_btn tr_btn_selected"}}else{this.className="tr_btn"}};this.obj.tr[window.dhx4.isIPad?"ontouchend":"onclick"]=function(l){l=l||event;l.cancelBubble=true;if(!this.en){return}a.setListOptionSelected(this.idd.replace(c.idPrefix,""));a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");window.dhx4.zim.clear(a.polygon._idd);a.polygon.style.display="none";if(a.polygon._ie6cover){a.polygon._ie6cover.style.display="none"}if(c.conf.skin=="dhx_terrace"){c._improveTerraceButtonSelect(a.id,true)}c.anyUsed="none";var m=this.idd.replace(c.idPrefix,"");if(this.extAction){try{window[this.extAction](m)}catch(l){}}c.callEvent("onClick",[m])};a._listOptions[k]=this.obj;return this};this.polygon=document.createElement("DIV");this.polygon.dir="ltr";this.polygon.style.display="none";this.polygon.className="dhx_toolbar_poly_"+c.conf.skin+" dhxtoolbar_icons_"+c.conf.iconSize;this.polygon.onselectstart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}};this.polygon.onmousedown=function(g){g=g||event;g.cancelBubble=true};this.polygon.style.overflowY="auto";this.polygon._idd=window.dhx4.newId();if(window.dhx4.isIPad){this.polygon.ontouchstart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}g.cancelBubble=true;return false}}this.p_tbl=document.createElement("TABLE");this.p_tbl.className="buttons_cont";this.p_tbl.cellSpacing="0";this.p_tbl.cellPadding="0";this.p_tbl.border="0";this.polygon.appendChild(this.p_tbl);this.p_tbody=document.createElement("TBODY");this.p_tbl.appendChild(this.p_tbody);if(e.options!=null){for(var d=0;d<e.options.length;d++){var b="_"+(e.options[d].type||"")+"ButtonSelectObject";if(e.options[d].id==null){e.options[d].id=c._genStr(24)}if(typeof(this[b])=="function"){new this[b](e.options[d].id,e.options[d])}}}document.body.appendChild(this.polygon);if(window.dhx4.isIE6){this.polygon._ie6cover=document.createElement("IFRAME");this.polygon._ie6cover.frameBorder=0;this.polygon._ie6cover.style.position="absolute";this.polygon._ie6cover.style.border="none";this.polygon._ie6cover.style.backgroundColor="#000000";this.polygon._ie6cover.style.filter="alpha(opacity=100)";this.polygon._ie6cover.style.display="none";this.polygon._ie6cover.setAttribute("src","javascript:false;");document.body.appendChild(this.polygon._ie6cover)}this.setWidth=function(g){this.obj.style.width=g-this.arw.offsetWidth+"px";this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px";this.p_tbl.style.width=this.polygon.style.width};this.enableItem=function(){c._enableItem(this)};this.disableItem=function(){c._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display="";this.arw.style.display=""};this.hideItem=function(){this.obj.style.display="none";this.arw.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(g){c._setItemText(this,g)};this.getItemText=function(){return c._getItemText(this)};this.setItemImage=function(g){c._setItemImage(this,g,true)};this.clearItemImage=function(){c._clearItemImage(this,true)};this.setItemImageDis=function(g){c._setItemImage(this,g,false)};this.clearItemImageDis=function(){c._clearItemImage(this,false)};this.setItemToolTip=function(g){this.obj.title=g;this.arw.title=g};this.getItemToolTip=function(){return this.obj.title};this.addListOption=function(l,k,i,j,g){if(!(i=="button"||i=="separator")){return}var h={id:l,type:i,text:j,img:g};new this["_"+i+"ButtonSelectObject"](l,h,k)};this.removeListOption=function(i){if(!this._isListButton(i,true)){return}var g=this._listOptions[i];if(g.td_a!=null&&g.td_b!=null){g.td_a.onselectstart=null;g.td_b.onselectstart=null;while(g.td_a.childNodes.length>0){g.td_a.removeChild(g.td_a.childNodes[0])}while(g.td_b.childNodes.length>0){g.td_b.removeChild(g.td_b.childNodes[0])}g.tr.onselectstart=null;g.tr.onmouseover=null;g.tr.onmouseout=null;g.tr.onclick=null;while(g.tr.childNodes.length>0){g.tr.removeChild(g.tr.childNodes[0])}g.tr.parentNode.removeChild(g.tr);g.td_a=null;g.td_b=null;g.tr=null}else{g.sep.onselectstart=null;g.td.onselectstart=null;g.tr.onselectstart=null;while(g.td.childNodes.length>0){g.td.removeChild(g.td.childNodes[0])}while(g.tr.childNodes.length>0){g.tr.removeChild(g.tr.childNodes[0])}g.tr.parentNode.removeChild(g.tr);g.sep=null;g.td=null;g.tr=null}g=null;this._listOptions[i]=null;try{delete this._listOptions[i]}catch(h){}};this.showListOption=function(g){if(!this._isListButton(g,true)){return}this._listOptions[g].tr.style.display=""};this.hideListOption=function(g){if(!this._isListButton(g,true)){return}this._listOptions[g].tr.style.display="none"};this.isListOptionVisible=function(g){if(!this._isListButton(g,true)){return}return(this._listOptions[g].tr.style.display!="none")};this.enableListOption=function(g){if(!this._isListButton(g)){return}this._listOptions[g].tr.en=true;this._listOptions[g].tr.className="tr_btn"+(this._listOptions[g].tr._selected&&c.renderSelect?" tr_btn_selected":"")};this.disableListOption=function(g){if(!this._isListButton(g)){return}this._listOptions[g].tr.en=false;this._listOptions[g].tr.className="tr_btn tr_btn_disabled"};this.isListOptionEnabled=function(g){if(!this._isListButton(g)){return}return this._listOptions[g].tr.en};this.setListOptionPosition=function(i,h){if(!this._listOptions[i]||this.getListOptionPosition(i)==h||isNaN(h)){return}if(h<1){h=1}var g=this._listOptions[i].tr;this.p_tbody.removeChild(g);if(h>this.p_tbody.childNodes.length){this.p_tbody.appendChild(g)}else{this.p_tbody.insertBefore(g,this.p_tbody.childNodes[h-1])}g=null};this.getListOptionPosition=function(i){var h=-1;if(!this._listOptions[i]){return h}for(var g=0;g<this.p_tbody.childNodes.length;g++){if(this.p_tbody.childNodes[g]==this._listOptions[i].tr){h=g+1}}return h};this.setListOptionImage=function(j,g){if(!this._isListButton(j)){return}var i=this._listOptions[j].tr.childNodes[(c.rtl?1:0)];if(i.childNodes.length>0){i.childNodes[0].src=c.conf.icons_path+g}else{var h=document.createElement("IMG");h.className="btn_sel_img";h.src=c.conf.icons_path+g;i.appendChild(h)}i=null};this.getListOptionImage=function(i){if(!this._isListButton(i)){return}var h=this._listOptions[i].tr.childNodes[(c.rtl?1:0)];var g=null;if(h.childNodes.length>0){g=h.childNodes[0].src}h=null;return g};this.clearListOptionImage=function(h){if(!this._isListButton(h)){return}var g=this._listOptions[h].tr.childNodes[(c.rtl?1:0)];while(g.childNodes.length>0){g.removeChild(g.childNodes[0])}g.innerHTML="&nbsp;";g=null};this.setListOptionText=function(h,g){if(!this._isListButton(h)){return}this._listOptions[h].tr.childNodes[(c.rtl?0:1)].childNodes[0].innerHTML=g};this.getListOptionText=function(g){if(!this._isListButton(g)){return}return this._listOptions[g].tr.childNodes[(c.rtl?0:1)].childNodes[0].innerHTML};this.setListOptionToolTip=function(h,g){if(!this._isListButton(h)){return}this._listOptions[h].tr.title=g};this.getListOptionToolTip=function(g){if(!this._isListButton(g)){return}return this._listOptions[g].tr.title};this.forEachListOption=function(h){for(var g in this._listOptions){h(g)}};this.getAllListOptions=function(){var h=new Array();for(var g in this._listOptions){h[h.length]=g}return h};this.setListOptionSelected=function(i){for(var g in this._listOptions){var h=this._listOptions[g];if(h.td_a!=null&&h.td_b!=null&&h.tr.en){if(g==i){h.tr._selected=true;h.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":"");if(this.mode=="select"){if(h.tr._img){this.setItemImage(h.tr._img)}else{this.clearItemImage()}this.setItemText(this.getListOptionText(i))}}else{h.tr._selected=false;h.tr.className="tr_btn"}}h=null}};this.getListOptionSelected=function(){var h=null;for(var g in this._listOptions){if(this._listOptions[g].tr._selected==true){h=g}}return h};this._isListButton=function(h,g){if(this._listOptions[h]==null){return false}if(!g&&this._listOptions[h].tr.className=="tr_sep"){return false}return true};this.setMaxOpen=function(g){this._ph=null;if(typeof(g)=="number"){this.maxOpen=g;this._maxOpenTest();return}this.maxOpen=null};if(e.width){this.setWidth(e.width)}if(this.mode=="select"&&typeof(e.selected)!="undefined"){this.setListOptionSelected(e.selected)}return this};dhtmlXToolbarObject.prototype._buttonInputObject=function(c,e,d){this.id=c.idPrefix+e;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.obj.style.display=(d.hidden!=null?"none":"");this.obj.idd=String(e);this.obj.w=(d.width!=null?d.width:100);this.obj.title=(d.title!=null?d.title:"");this.obj.innerHTML="<input class='dhxtoolbar_input' type='text' style='width:"+this.obj.w+"px;'"+(d.value!=null?" value='"+d.value+"'":"")+">";var b=c;var a=this;this.obj.childNodes[0].onkeydown=function(f){f=f||event;if(f.keyCode==13){b.callEvent("onEnter",[a.obj.idd,this.value])}};c.base.appendChild(this.obj);this.enableItem=function(){this.obj.childNodes[0].disabled=false};this.disableItem=function(){this.obj.childNodes[0].disabled=true};this.isEnabled=function(){return(!this.obj.childNodes[0].disabled)};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display!="none")};this.setValue=function(f){this.obj.childNodes[0].value=f};this.getValue=function(){return this.obj.childNodes[0].value};this.setWidth=function(f){this.obj.w=f;this.obj.childNodes[0].style.width=this.obj.w+"px"};this.getWidth=function(){return this.obj.w};this.setItemToolTip=function(f){this.obj.title=f};this.getItemToolTip=function(){return this.obj.title};this.getInput=function(){return this.obj.firstChild};if(typeof(d.enabled)!="undefined"&&window.dhx4.s2b(d.enabled)==false){this.disableItem()}return this};dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(a,d,b){this.id=a.idPrefix+d;this.state=(b.enabled!=null?false:true);this.imgEn=(b.img!=null?b.img:"");this.imgDis=(b.imgdis!=null?b.imgdis:"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.obj=document.createElement("DIV");this.obj.pressed=(b.selected!=null);this.obj.extAction=(b.action||null);this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.obj.pressed?"pres"+(this.state?"":"_dis"):(this.state?"def":"dis"));this.obj.style.display=(b.hidden!=null?"none":"");this.obj.renderAs=this.obj.className;this.obj.idd=String(d);this.obj.title=(b.title||"");if(this.obj.pressed){this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}this.obj.innerHTML=a._rtlParseBtn((this.img!=""?"<img src='"+a.conf.icons_path+this.img+"'>":""),(b.text!=null?"<div class='dhxtoolbar_text'>"+b.text+"</div>":""));a.base.appendChild(this.obj);var c=this;this.obj.onselectstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};this.obj._doOnMouseOver=function(){if(c.state==false){return}if(a.anyUsed!="none"){return}if(this.pressed){this.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over";return}this.className="dhx_toolbar_btn dhxtoolbar_btn_over";this.renderAs=this.className};this.obj._doOnMouseOut=function(){if(c.state==false){return}if(a.anyUsed!="none"){return}if(this.pressed){this.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";return}this.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.renderAs=this.className};this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(f){if(a.checkEvent("onBeforeStateChange")){if(!a.callEvent("onBeforeStateChange",[this.idd.replace(a.idPrefix,""),this.pressed])){return}}if(c.state==false){return}if(a.anyUsed!="none"){return}this.pressed=!this.pressed;this.className=(this.pressed?"dhx_toolbar_btn dhxtoolbar_btn_pres":this.renderAs);var g=this.idd.replace(a.idPrefix,"");if(this.extAction){try{window[this.extAction](g,this.pressed)}catch(f){}}a.callEvent("onStateChange",[g,this.pressed]);return false};this.setItemState=function(f,h){if(this.obj.pressed!=f){if(f==true){this.obj.pressed=true;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"+(this.state?"":"_dis");this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}else{this.obj.pressed=false;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.renderAs=this.obj.className}if(h==true){var i=this.obj.idd.replace(a.idPrefix,"");if(this.obj.extAction){try{window[this.obj.extAction](i,this.obj.pressed)}catch(g){}}a.callEvent("onStateChange",[i,this.obj.pressed])}}};this.getItemState=function(){return this.obj.pressed};this.enableItem=function(){a._enableItem(this)};this.disableItem=function(){a._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(e){a._setItemText(this,e)};this.getItemText=function(){return a._getItemText(this)};this.setItemImage=function(e){a._setItemImage(this,e,true)};this.clearItemImage=function(){a._clearItemImage(this,true)};this.setItemImageDis=function(e){a._setItemImage(this,e,false)};this.clearItemImageDis=function(){a._clearItemImage(this,false)};this.setItemToolTip=function(e){this.obj.title=e};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._sliderObject=function(d,f,e){this.id=d.idPrefix+f;this.state=(e.enabled!=null?(e.enabled=="true"?true:false):true);this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(e.hidden!=null?"none":"");this.obj.onselectstart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}};this.obj.idd=String(f);this.obj.len=(e.length!=null?Number(e.length):50);this.obj.innerHTML="<div class='dhxtoolbar_text'>"+(e.textMin||"")+"</div><div class='dhxtoolbar_sl_bg_l'></div><div class='dhxtoolbar_sl_bg_m' style='width:"+this.obj.len+"px;'></div><div class='dhxtoolbar_sl_bg_r'></div><div class='dhxtoolbar_text'>"+(e.textMax||"")+"</div>";d.base.appendChild(this.obj);var a=this;this.pen=document.createElement("DIV");this.pen.className="dhxtoolbar_sl_pen";this.obj.appendChild(this.pen);var c=this.pen;this.label=document.createElement("DIV");this.label.dir="ltr";this.label.className="dhx_toolbar_slider_label_"+d.conf.skin+(d.rtl?"_rtl":"");this.label.style.display="none";this.label.tip=(e.toolTip||"%v");this.label._zi=window.dhx4.newId();document.body.appendChild(this.label);var b=this.label;this.pen.valueMin=(e.valueMin!=null?Number(e.valueMin):0);this.pen.valueMax=(e.valueMax!=null?Number(e.valueMax):100);if(this.pen.valueMin>this.pen.valueMax){this.pen.valueMin=this.pen.valueMax}this.pen.valueNow=(e.valueNow!=null?Number(e.valueNow):this.pen.valueMax);if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits=function(){this.minX=a.obj.childNodes[1].offsetLeft+2;this.maxX=a.obj.childNodes[3].offsetLeft-this.offsetWidth+1};this.pen._detectLimits();this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX);this.style.left=this.nowX+"px";this.newNowX=this.nowX};this.pen._definePos();this.pen.initXY=0;this.pen.allowMove=false;this.pen[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(g){if(a.state==false){return}g=g||event;this.initXY=(window.dhx4.isIPad?g.touches[0].clientX:g.clientX);this.newValueNow=this.valueNow;this.allowMove=true;this.className="dhxtoolbar_sl_pen dhxtoolbar_over";if(b.tip!=""){b.style.visibility="hidden";b.style.display="";b.innerHTML=b.tip.replace("%v",this.valueNow);b.style.left=Math.round(window.dhx4.absLeft(this)+this.offsetWidth/2-b.offsetWidth/2)+"px";b.style.top=window.dhx4.absTop(this)-b.offsetHeight-3+"px";b.style.visibility="";b.style.zIndex=window.dhx4.zim.reserve(b._zi)}};this.pen._doOnMouseMoveStart=function(h){h=h||event;if(!c.allowMove){return}var g=(window.dhx4.isIPad?h.touches[0].clientX:h.clientX);var i=g-c.initXY;if(g<window.dhx4.absLeft(c)+Math.round(c.offsetWidth/2)&&c.nowX==c.minX){return}if(g>window.dhx4.absLeft(c)+Math.round(c.offsetWidth/2)&&c.nowX==c.maxX){return}c.newNowX=c.nowX+i;if(c.newNowX<c.minX){c.newNowX=c.minX}if(c.newNowX>c.maxX){c.newNowX=c.maxX}c.nowX=c.newNowX;c.style.left=c.nowX+"px";c.initXY=g;c.newValueNow=Math.round((c.valueMax-c.valueMin)*(c.newNowX-c.minX)/(c.maxX-c.minX)+c.valueMin);if(b.tip!=""){b.innerHTML=b.tip.replace(/%v/gi,c.newValueNow);b.style.left=Math.round(window.dhx4.absLeft(c)+c.offsetWidth/2-b.offsetWidth/2)+"px";b.style.top=window.dhx4.absTop(c)-b.offsetHeight-3+"px"}h.cancelBubble=true;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}return false};this.pen._doOnMouseMoveEnd=function(){if(!c.allowMove){return}c.className="dhxtoolbar_sl_pen";c.allowMove=false;c.nowX=c.newNowX;c.valueNow=c.newValueNow;if(b.tip!=""){b.style.display="none";window.dhx4.zim.clear(b._zi)}d.callEvent("onValueChange",[a.obj.idd.replace(d.idPrefix,""),c.valueNow])};if(window.dhx4.isIPad){document.addEventListener("touchmove",c._doOnMouseMoveStart,false);document.addEventListener("touchend",c._doOnMouseMoveEnd,false)}else{if(typeof(window.addEventListener)!="undefined"){window.addEventListener("mousemove",c._doOnMouseMoveStart,false);window.addEventListener("mouseup",c._doOnMouseMoveEnd,false)}else{document.body.attachEvent("onmousemove",c._doOnMouseMoveStart);document.body.attachEvent("onmouseup",c._doOnMouseMoveEnd)}}this.enableItem=function(){if(this.state){return}this.state=true;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"};this.disableItem=function(){if(!this.state){return}this.state=false;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_dis"};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setValue=function(g,h){g=Number(g);if(g<this.pen.valueMin){g=this.pen.valueMin}if(g>this.pen.valueMax){g=this.pen.valueMax}this.pen.valueNow=g;this.pen._definePos();if(h==true){d.callEvent("onValueChange",[this.obj.idd.replace(d.idPrefix,""),this.pen.valueNow])}};this.getValue=function(){return this.pen.valueNow};this.setMinValue=function(h,g){h=Number(h);if(h>this.pen.valueMax){return}this.obj.childNodes[0].innerHTML=g;this.obj.childNodes[0].style.display=(g.length>0?"":"none");this.pen.valueMin=h;if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits();this.pen._definePos()};this.setMaxValue=function(h,g){h=Number(h);if(h<this.pen.valueMin){return}this.obj.childNodes[4].innerHTML=g;this.obj.childNodes[4].style.display=(g.length>0?"":"none");this.pen.valueMax=h;if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}this.pen._detectLimits();this.pen._definePos()};this.getMinValue=function(){var g=this.obj.childNodes[0].innerHTML;var h=this.pen.valueMin;return new Array(h,g)};this.getMaxValue=function(){var g=this.obj.childNodes[4].innerHTML;var h=this.pen.valueMax;return new Array(h,g)};this.setItemToolTipTemplate=function(g){this.label.tip=g};this.getItemToolTipTemplate=function(){return this.label.tip};return this};dhtmlXToolbarObject.prototype.unload=function(){if(this.conf.isIPad){document.removeEventListener("touchstart",this._doOnClick,false)}else{if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousedown",this._doOnClick,false)}else{document.body.detachEvent("onmousedown",this._doOnClick)}}this._doOnClick=null;this.clearAll();this.objPull=null;if(this._xmlLoader){this._xmlLoader.destructor();this._xmlLoader=null}while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}this.cont.removeChild(this.base);this.base=null;while(this.cont.childNodes.length>0){this.cont.removeChild(this.cont.childNodes[0])}this.cont.className="";this.cont=null;window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");this.tX1=null;this.tX2=null;this.tY1=null;this.tY2=null;this.anyUsed=null;this.idPrefix=null;this.rootTypes=null;this._rtl=null;this._rtlParseBtn=null;this.setRTL=null;this._sbw=null;this._getObj=null;this._addImgObj=null;this._setItemImage=null;this._clearItemImage=null;this._setItemText=null;this._getItemText=null;this._enableItem=null;this._disableItem=null;this._xmlParser=null;this._addItemToStorage=null;this._genStr=null;this._addItem=null;this._getPosition=null;this._setPosition=null;this._getIdByPosition=null;this._separatorObject=null;this._textObject=null;this._buttonObject=null;this._buttonSelectObject=null;this._buttonInputObject=null;this._buttonTwoStateObject=null;this._sliderObject=null;this._autoDetectVisibleArea=null;this._removeItem=null;this.setAlign=null;this.setSkin=null;this.setIconsPath=null;this.setIconPath=null;this.loadXML=null;this.loadXMLString=null;this.clearAll=null;this.addSpacer=null;this.removeSpacer=null;this.getType=null;this.getTypeExt=null;this.inArray=null;this.getParentId=null;this.addButton=null;this.addText=null;this.addButtonSelect=null;this.addButtonTwoState=null;this.addSeparator=null;this.addSlider=null;this.addInput=null;this.forEachItem=null;this.showItem=null;this.hideItem=null;this.isVisible=null;this.enableItem=null;this.disableItem=null;this.isEnabled=null;this.setItemText=null;this.getItemText=null;this.setItemToolTip=null;this.getItemToolTip=null;this.setItemImage=null;this.setItemImageDis=null;this.clearItemImage=null;this.clearItemImageDis=null;this.setItemState=null;this.getItemState=null;this.setItemToolTipTemplate=null;this.getItemToolTipTemplate=null;this.setValue=null;this.getValue=null;this.setMinValue=null;this.getMinValue=null;this.setMaxValue=null;this.getMaxValue=null;this.setWidth=null;this.getWidth=null;this.getPosition=null;this.setPosition=null;this.removeItem=null;this.addListOption=null;this.removeListOption=null;this.showListOption=null;this.hideListOption=null;this.isListOptionVisible=null;this.enableListOption=null;this.disableListOption=null;this.isListOptionEnabled=null;this.setListOptionPosition=null;this.getListOptionPosition=null;this.setListOptionText=null;this.getListOptionText=null;this.setListOptionToolTip=null;this.getListOptionToolTip=null;this.setListOptionImage=null;this.getListOptionImage=null;this.clearListOptionImage=null;this.forEachListOption=null;this.getAllListOptions=null;this.setListOptionSelected=null;this.getListOptionSelected=null;this.unload=null;this.setUserData=null;this.getUserData=null;this.setMaxOpen=null;this.items=null;this.conf=null};dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){var a=window.dhx4.screenDim();this.tX1=a.left;this.tX2=a.right;this.tY1=a.top;this.tY2=a.bottom};dhtmlXToolbarObject.prototype._initObj=function(b){for(var a=0;a<b.length;a++){this._addItemToStorage(b[a])}if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._xmlToJson=function(l){var i=[];var o=l.getElementsByTagName("toolbar");if(o!=null&&o[0]!=null){o=o[0];var x=["id","type","hidden","title","text","enabled","img","imgdis","action","openAll","renderSelect","mode","maxOpen","width","value","selected","length","textMin","textMax","toolTip","valueMin","valueMax","valueNow"];var c=["id","type","enabled","disabled","action","selected","img","text"];for(var b=0;b<o.childNodes.length;b++){if(o.childNodes[b].tagName=="item"){var g={};for(var s=0;s<x.length;s++){var d=o.childNodes[b].getAttribute(x[s]);if(d!=null){g[x[s]]=d}}for(var n=0;n<o.childNodes[b].childNodes.length;n++){if(o.childNodes[b].childNodes[n].tagName=="item"&&g.type=="buttonSelect"){var v={};for(var s=0;s<c.length;s++){var d=o.childNodes[b].childNodes[n].getAttribute(c[s]);if(d!=null){v[c[s]]=d}}var m=o.childNodes[b].childNodes[n].getElementsByTagName("itemText");if(m!=null&&m[0]!=null){v.itemText=m[0].firstChild.nodeValue}var j=o.childNodes[b].childNodes[n].getElementsByTagName("userdata");for(var s=0;s<j.length;s++){if(!v.userdata){v.userdata={}}var a={};try{a.name=j[s].getAttribute("name")}catch(f){a.name=null}try{a.value=j[s].firstChild.nodeValue}catch(f){a.value=""}if(a.name!=null){v.userdata[a.name]=a.value}}if(g.options==null){g.options=[]}g.options.push(v)}if(o.childNodes[b].childNodes[n].tagName=="userdata"){if(g.userdata==null){g.userdata={}}var v={};try{v.name=o.childNodes[b].childNodes[n].getAttribute("name")}catch(f){v.name=null}try{v.value=o.childNodes[b].childNodes[n].firstChild.nodeValue}catch(f){v.value=""}if(v.name!=null){g.userdata[v.name]=v.value}}}i.push(g)}}}return i};dhtmlXToolbarObject.prototype._addItemToStorage=function(f,h){var g=(f.id||this._genStr(24));var d=(f.type||"");if(d!=""&&this["_"+d+"Object"]!=null){if(d=="buttonSelect"){if(f.options!=null){for(var e=0;e<f.options.length;e++){if(f.options[e].type=="obj"){f.options[e].type="button"}if(f.options[e].type=="sep"){f.options[e].type="separator"}}}}if(d=="slider"){var c={tip_template:"toolTip",value_min:"valueMin",value_max:"valueMax",value_now:"valueNow",text_min:"textMin",text_max:"textMax"};for(var b in c){if(f[c[b]]==null&&f[b]!=null){f[c[b]]=f[b]}}}if(d=="buttonInput"){if(f.value==null&&f.text!=null){f.value=f.text}}if(d=="buttonTwoState"){if(typeof(f.selected)=="undefined"&&typeof(f.pressed)!="undefined"&&window.dhx4.s2b(f.pressed)){f.selected=true}}if(typeof(f.enabled)=="undefined"&&typeof(f.disabled)!="undefined"&&window.dhx4.s2b(f.disabled)){f.enabled=false}if(f.imgDis==null&&f.img_disabled!=null){f.imgdis=f.img_disabled}if((typeof(f.openAll)=="undefined"||f.openAll==null)&&this.conf.skin=="dhx_terrace"){f.openAll=true}this.objPull[this.idPrefix+g]=new this["_"+d+"Object"](this,g,f);this.objPull[this.idPrefix+g]["type"]=d;this.setPosition(g,h)}if(f.userdata!=null){for(var b in f.userdata){this.setUserData(g,b,f.userdata[b])}}if(f.options!=null){for(var e=0;e<f.options.length;e++){if(f.options[e].userdata!=null){for(var b in f.options[e].userdata){this.setListOptionUserData(f.id,f.options[e].id,b,f.options[e].userdata[b])}}}}};dhtmlXToolbarObject.prototype.setSkin=function(e,c){if(c===true){this.cont.className=this.cont.className.replace(/dhxtoolbar_icons_\d{1,}/,"dhxtoolbar_icons_"+this.conf.iconSize)}else{this.conf.skin=e;if(this.conf.skin=="dhx_skyblue"){this.conf.sel_ofs_y=1}if(this.conf.skin=="dhx_web"){this.conf.sel_ofs_y=1;this.conf.sel_ofs_x=1}if(this.conf.skin=="dhx_terrace"){this.conf.sel_ofs_y=-1;this.conf.sel_ofs_x=0}this.cont.className="dhx_toolbar_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize}for(var b in this.objPull){var d=this.objPull[b];if(d.type=="slider"){d.pen._detectLimits();d.pen._definePos();d.label.className="dhx_toolbar_slider_label_"+this.conf.skin}if(d.type=="buttonSelect"){d.polygon.className="dhx_toolbar_poly_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize}}if(e=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.setAlign=function(a){this.conf.align=(a=="right"?"right":"left");this.base.className=(a=="right"?"dhxtoolbar_float_right":"dhxtoolbar_float_left");if(this._spacer){this._spacer.className=(a=="right"?" dhxtoolbar_float_left":" dhxtoolbar_float_right")}};dhtmlXToolbarObject.prototype.setIconSize=function(a){this.conf.iconSize=({18:true,24:true,32:true,48:true}[a]?a:18);this.setSkin(this.conf.skin,true);this.callEvent("_onIconSizeChange",[this.conf.iconSize])};dhtmlXToolbarObject.prototype.setIconsPath=function(a){this.conf.icons_path=a};dhtmlXToolbarObject.prototype.setUserData=function(c,a,b){c=this.idPrefix+c;if(this.objPull[c]!=null){if(this.objPull[c].userData==null){this.objPull[c].userData={}}this.objPull[c].userData[a]=b}};dhtmlXToolbarObject.prototype.getUserData=function(b,a){b=this.idPrefix+b;if(this.objPull[b]!=null&&this.objPull[b].userData!=null){return this.objPull[b].userData[a]||null}return null};dhtmlXToolbarObject.prototype._isListOptionExists=function(a,c){if(this.objPull[this.idPrefix+a]==null){return false}var b=this.objPull[this.idPrefix+a];if(b.type!="buttonSelect"){return false}if(b._listOptions[c]==null){return false}return true};dhtmlXToolbarObject.prototype.setListOptionUserData=function(a,e,b,d){if(!this._isListOptionExists(a,e)){return}var c=this.objPull[this.idPrefix+a]._listOptions[e];if(c.userData==null){c.userData={}}c.userData[b]=d};dhtmlXToolbarObject.prototype.getListOptionUserData=function(a,d,b){if(!this._isListOptionExists(a,d)){return null}var c=this.objPull[this.idPrefix+a]._listOptions[d];if(!c.userData){return null}return(c.userData[b]?c.userData[b]:null)};dhtmlXToolbarObject.prototype._improveTerraceSkin=function(){if(this.conf.terrace_radius==null){this.conf.terrace_radius="3px"}var c=[];var d={separator:true,text:true};var g=[this.base];if(this._spacer!=null){g.push(this._spacer)}for(var i=0;i<g.length;i++){c[i]=[];for(var b=0;b<g[i].childNodes.length;b++){if(g[i].childNodes[b].idd!=null&&g[i].childNodes[b].style.display!="none"){var h=this.idPrefix+g[i].childNodes[b].idd;if(this.objPull[h]!=null&&this.objPull[h].obj==g[i].childNodes[b]){c[i].push({a:h,type:this.objPull[h].type,node:this.objPull[h][this.objPull[h].type=="buttonSelect"?"arw":"obj"]})}}}g[i]=null}for(var i=0;i<c.length;i++){for(var b=0;b<c[i].length;b++){var j=c[i][b];var k=false;var f=false;if(!d[j.type]){if(b==c[i].length-1||(c[i][b+1]!=null&&d[c[i][b+1].type])){k=true}if(b==0||(b-1>=0&&c[i][b-1]!=null&&d[c[i][b-1].type])){f=true}}j.node.style.borderRightWidth=(k?"1px":"0px");j.node.style.borderTopRightRadius=j.node.style.borderBottomRightRadius=(k?this.conf.terrace_radius:"0px");if(j.type=="buttonSelect"){j.node.previousSibling.style.borderTopLeftRadius=j.node.previousSibling.style.borderBottomLeftRadius=(f?this.conf.terrace_radius:"0px");j.node.previousSibling._br=k;j.node.previousSibling._bl=f}else{j.node.style.borderTopLeftRadius=j.node.style.borderBottomLeftRadius=(f?this.conf.terrace_radius:"0px")}j.node._br=k;j.node._bl=f}}for(var i=0;i<c.length;i++){for(var b=0;b<c[i].length;b++){for(var h in c[i][b]){c[i][b][h]=null}c[i][b]=null}c[i]=null}c=g=null};dhtmlXToolbarObject.prototype._improveTerraceButtonSelect=function(c,b){var a=this.objPull[c];if(b==true){a.obj.style.borderBottomLeftRadius=(a.obj._bl?this.conf.terrace_radius:"0px");a.arw.style.borderBottomRightRadius=(a.obj._br?this.conf.terrace_radius:"0px")}else{a.obj.style.borderBottomLeftRadius="0px";a.arw.style.borderBottomRightRadius="0px"}a=null};function dhtmlXEditor(c,d){var b=this;this.conf={content:"",contentHTML:"",resizeTM:null,resizeTMTime:100,roMode:false,toolbar:false,iconsPath:"",evs:["focus","blur","keydown","keyup","keypress","mouseup","mousedown","click"]};this._doOnFocusChanged=null;this._doOnAccess=null;if(typeof(c)=="object"&&c!=null&&c.tagName==null){d=c.skin;if(c.content!=null){this.conf.content=c.content}if(c.contentHTML!=null){this.conf.contentHTML=c.contentHTML}if(c.iconsPath!=null){this.conf.iconsPath=c.iconsPath}if(c.toolbar!=null){this.conf.toolbar=window.dhx4.s2b(c.toolbar)}if(c.onFocusChanged!=null){this._doOnFocusChanged=c.onFocusChanged}if(c.onAccess!=null){this._doOnAccess=c.onAccess}c=c.parent}this.conf.skin=(d||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxeditor")||"dhx_skyblue");if(typeof(c)=="string"){c=document.getElementById(c)}this.base=c;this.base.className+=" dhxeditor_"+this.conf.skin;while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}var e=(window.dhx4.isIE?this.base.currentStyle.position:window.getComputedStyle(this.base,null).getPropertyValue("position"));if(!(e=="relative"||e=="absolute")){this.base.style.position="relative"}this.cell=new dhtmlXEditorCell(window.dhx4.newId(),this);this.base.appendChild(this.cell.cell);this.setSizes();this.cBlock=document.createElement("DIV");this.cBlock.className="dhxcont_content_blocker";this.cBlock.style.display="none";this.base.appendChild(this.cBlock);this.editor=document.createElement("IFRAME");this.editor.className="dhxeditor_mainiframe";this.editor.frameBorder=0;if(window.dhx4.isOpera){this.editor.scrolling="yes"}var a=this.editor;if(typeof(window.addEventListener)!="undefined"){a.onload=function(){for(var f=0;f<b.conf.evs.length;f++){a.contentWindow.addEventListener(b.conf.evs[f],b._ev,false)}}}else{a.onreadystatechange=function(f){if(typeof(a.readyState)!="undefined"&&a.readyState=="complete"){try{for(var g=0;g<b.conf.evs.length;g++){a.contentWindow.document.body.attachEvent("on"+b.conf.evs[g],b._ev)}}catch(h){}}}}this._ev=function(g){g=g||event;var f=g.type;b.callEvent("onAccess",[f,g]);if(typeof(b._doOnAccess)=="function"){b._doOnAccess(f,g)}else{if(typeof(b._doOnAccess)=="string"&&typeof(window[b._doOnAccess])=="function"){window[b._doOnAccess](f,g)}}};this._focus=function(){if(window.dhx4.isIE){this.editor.contentWindow.document.body.focus()}else{this.editor.contentWindow.focus()}};this.cell.attachObject(this.editor);this.edWin=this.editor.contentWindow;this.edDoc=this.edWin.document;this._prepareContent=function(h,j){var g="";if(h===true&&this.getContent!=null){g=this.getContent()}var f=this.editor.contentWindow.document;f.open("text/html","replace");if(window.dhx4.isOpera){f.write("<html><head><style> html, body { overflow:auto;-webkit-overflow-scrolling: touch; padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(j!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{if(window.dhx4.isKHTML){f.write("<html><head><style> html {overflow-x: auto;-webkit-overflow-scrolling: touch; overflow-y: auto;} body { overflow: auto; overflow-y: scroll;} html,body { padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(j!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{if(window.dhx4.isIE){f.write("<html><head><style> html {overflow-y: auto;} body {overflow-y: scroll;-webkit-overflow-scrolling: touch;} html,body { overflow-x: auto; padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color: #ffffff; outline: none;} </style></head><body "+(j!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{f.write("<html><head><style> html,body { overflow-x: auto; overflow-y:-webkit-overflow-scrolling: touch; scroll; padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(j!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}}}f.close();if(window.dhx4.isIE){f.contentEditable=(j!==true)}else{f.designMode=(j!==true?"On":"Off")}if(window.dhx4.isFF){try{f.execCommand("useCSS",false,true)}catch(i){}}if(h===true&&this.setContent!=null){this.setContent(g)}};this._prepareContent();this._doOnResize=function(){window.clearTimeout(b.conf.resizeTM);b.conf.resizeTM=window.setTimeout(function(){if(b.setSizes){b.setSizes()}},b.conf.resizeTMTime)};this._runCommand=function(h,j){if(this.conf.roMode===true){return}if(arguments.length<2){j=null}if(window.dhx4.isIE){this.edWin.focus()}try{var g=this.editor.contentWindow.document;g.execCommand(h,false,j)}catch(i){}if(window.dhx4.isIE){this.edWin.focus();var f=this;window.setTimeout(function(){f.edWin.focus();f=null},1)}};this.applyBold=function(){this._runCommand("Bold")};this.applyItalic=function(){this._runCommand("Italic")};this.applyUnderscore=function(){this._runCommand("Underline")};this.clearFormatting=function(){this._runCommand("RemoveFormat")};this._doOnClick=function(h){var g=h||window.event;var f=g.target||g.srcElement;b._showInfo(f)};this._doOnMouseDown=function(h){var g=h||window.event;var f=g.target||g.srcElement;b._showInfo(f)};this._doOnKeyUp=function(i){var h=i||window.event;var f=h.keyCode;var g=h.target||h.srcElement;if({37:1,38:1,39:1,40:1,13:1}[f]==1){b._showInfo(g)}};this._getParentByTag=function(f,h){h=h.toLowerCase();var g=f;do{if(h==""||g.nodeName.toLowerCase()==h){return g}}while(g=g.parentNode);return f};this._isStyleProperty=function(g,i,f,h){i=i.toLowerCase();var j=g;do{if((j.nodeName.toLowerCase()==i)&&(j.style[f]==h)){return true}}while(j=j.parentNode);return false};this._setStyleProperty=function(f,h){this.style[h]=false;var g=this._getParentByTag(f,h);if(g&&(g.tagName.toLowerCase()==h)){this.style[h]=true}if(h=="del"&&this._getParentByTag(f,"strike")&&this._getParentByTag(f,"strike").tagName.toLowerCase()=="strike"){this.style.del=true}};this._showInfo=function(g){var g=(this._getSelectionBounds().end)?this._getSelectionBounds().end:g;if(!g||!this._setStyleProperty){return}try{if(this.edWin.getComputedStyle){var f=this.edWin.getComputedStyle(g,null);var h=((f.getPropertyValue("font-weight")==401)?700:f.getPropertyValue("font-weight"));this.style={fontStyle:f.getPropertyValue("font-style"),fontSize:f.getPropertyValue("font-size"),textDecoration:f.getPropertyValue("text-decoration"),fontWeight:h,fontFamily:f.getPropertyValue("font-family"),textAlign:f.getPropertyValue("text-align")};if(window.dhx4.isKHTML){this.style.fontStyle=f.getPropertyValue("font-style");this.style.vAlign=f.getPropertyValue("vertical-align");this.style.del=this._isStyleProperty(g,"span","textDecoration","line-through");this.style.u=this._isStyleProperty(g,"span","textDecoration","underline")}}else{var f=g.currentStyle;this.style={fontStyle:f.fontStyle,fontSize:f.fontSize,textDecoration:f.textDecoration,fontWeight:f.fontWeight,fontFamily:f.fontFamily,textAlign:f.textAlign}}this._setStyleProperty(g,"h1");this._setStyleProperty(g,"h2");this._setStyleProperty(g,"h3");this._setStyleProperty(g,"h4");if(!window.dhx4.isKHTML){this._setStyleProperty(g,"del");this._setStyleProperty(g,"sub");this._setStyleProperty(g,"sup");this._setStyleProperty(g,"u")}this.callEvent("onFocusChanged",[this.style,f])}catch(i){return null}};this._getSelectionBounds=function(){var j,h,l,g;if(this.edWin.getSelection){var k=this.edWin.getSelection();j=k.getRangeAt(k.rangeCount-1);l=j.startContainer;g=j.endContainer;h=j.commonAncestorContainer;if(l.nodeName=="#text"){h=h.parentNode}if(l.nodeName=="#text"){l=l.parentNode}if(l.nodeName.toLowerCase()=="body"){l=l.firstChild}if(g.nodeName=="#text"){g=g.parentNode}if(g.nodeName.toLowerCase()=="body"){g=g.lastChild}if(l==g){h=l}return{root:h,start:l,end:g}}else{if(this.edWin.document.selection){j=this.edDoc.selection.createRange();if(!j.duplicate){return null}h=j.parentElement();var i=j.duplicate();var f=j.duplicate();i.collapse(true);f.moveToElementText(i.parentElement());f.setEndPoint("EndToStart",i);l=i.parentElement();i=j.duplicate();f=j.duplicate();f.collapse(false);i.moveToElementText(f.parentElement());i.setEndPoint("StartToEnd",f);g=f.parentElement();if(l.nodeName.toLowerCase()=="body"){l=l.firstChild}if(g.nodeName.toLowerCase()=="body"){g=g.lastChild}if(l==g){h=l}return{root:h,start:l,end:g}}}return null};this.getContent=function(){if(!this.edDoc.body){return""}else{if(window.dhx4.isFF){return this.editor.contentWindow.document.body.innerHTML.replace(/<\/{0,}br\/{0,}>\s{0,}$/gi,"")}if(window.dhx4.isIE&&this.edDoc.body.innerText.length==0){return""}return this.edDoc.body.innerHTML}};this.setContent=function(h){h=h||"";if(this.edDoc.body){var g=false;if(window.dhx4.isFF){var f=navigator.userAgent.match(/Firefox\/(\d*)/);g=(f!=null&&f[1]<28)}if(g){if(typeof(this.conf.ffTest)=="undefined"){this.editor.contentWindow.document.body.innerHTML="";this._runCommand("InsertHTML","test");this.conf.ffTest=(this.editor.contentWindow.document.body.innerHTML.length>0)}if(this.conf.ffTest){this.editor.contentWindow.document.body.innerHTML=h}else{this.editor.contentWindow.document.body.innerHTML="";if(h.length==0){h=" "}this._runCommand("InsertHTML",h)}}else{this.editor.contentWindow.document.body.innerHTML=h}this.callEvent("onContentSet",[])}else{if(!this.conf.firstLoadEv){this.conf.firstLoadEv=true;this.conf.firstLoadData=h;this._onFirstLoad=function(){b.setContent(b.conf.firstLoadData);if(typeof(window.addEventListener)=="function"){b.edWin.removeEventListener("load",b._onFirstLoad,false)}else{b.edWin.detachEvent("onload",b._onFirstLoad)}b.conf.firstLoadData=null;b.conf.firstLoadEv=false;b._onFirstLoad=null};if(typeof(window.addEventListener)=="function"){this.edWin.addEventListener("load",this._onFirstLoad,false)}else{this.edWin.attachEvent("onload",this._onFirstLoad)}}}};this.setContentHTML=function(f){window.dhx4.ajax.get(f,function(g){if(g.xmlDoc.responseText!=null){b.setContent(g.xmlDoc.responseText)}})};window.dhx4._eventable(this);this.attachEvent("onFocusChanged",function(f){if(typeof(this._doOnFocusChanged)=="function"){this._doOnFocusChanged(f)}else{if(typeof(this._doOnFocusChanged)=="string"&&typeof(window[this._doOnFocusChanged])=="function"){window[this._doOnFocusChanged](f)}}});if(typeof(window.addEventListener)=="function"){window.addEventListener("resize",this._doOnResize,false);this.edDoc.addEventListener("click",this._doOnClick,false);this.edDoc.addEventListener("keyup",this._doOnKeyUp,false);if(window.dhx4.isOpera){this.edDoc.addEventListener("mousedown",this._doOnMouseDown,false)}}else{window.attachEvent("onresize",this._doOnResize);this.edDoc.attachEvent("onclick",this._doOnClick);this.edDoc.attachEvent("onkeyup",this._doOnKeyUp)}this.unload=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("resize",this._doOnResize,false);this.edDoc.removeEventListener("click",this._doOnClick,false);this.edDoc.removeEventListener("keyup",this._doOnKeyUp,false);if(window.dhx4.isOpera){this.edDoc.removeEventListener("mousedown",this._doOnMouseDown,false)}for(var f=0;f<b.conf.evs.length;f++){a.contentWindow.removeEventListener(b.conf.evs[f],b._ev,false)}}else{window.detachEvent("onresize",this._doOnResize,false);this.edDoc.detachEvent("onclick",this._doOnClick);this.edDoc.detachEvent("onkeyup",this._doOnKeyUp);for(var f=0;f<b.conf.evs.length;f++){a.contentWindow.document.body.detachEvent("on"+b.conf.evs[f],b._ev)}}this._doOnAccess=null;this._doOnFocusChanged=null;if(typeof(window.addEventListener)=="function"){this.editor.onload=null}else{this.editor.onreadystatechange=null}this.editor.parentNode.removeChild(this.editor);this.editor=null;this.edDoc=null;this.edWin=null;this.cell._unload();this.cell=null;this.tb=null;window.dhx4._eventable(this,"clear");this.cBlock.parentNode.removeChild(this.cBlock);this.cBlock=null;this.base.className=String(this.base.className).replace(new RegExp("\\s{0,}dhxeditor_"+this.conf.skin),"");while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}this.base=null;this._doOnClick=null;this._doOnKeyUp=null;this._doOnMouseDown=null;this._ev=null;this._focus=null;this._prepareContent=null;this._doOnResize=null;this.setIconsPath=null;this.init=null;this.setSizes=null;this._runCommand=null;this.applyBold=null;this.applyItalic=null;this.applyUnderscore=null;this.clearFormatting=null;this._showInfo=null;this._getSelectionBounds=null;this.getContent=null;this.setContent=null;this.setContentHTML=null;this.setReadonly=null;this.isReadonly=null;this.unload=null;b=a=null};if(this.conf.toolbar==true&&typeof(this.attachToolbar)=="function"&&typeof(window.dhtmlXToolbarObject)=="function"){this.attachToolbar(this.conf.iconsPath)}this.setIconsPath=function(f){this.conf.iconsPath=f};if(this.conf.content.length>0){this.setContent(this.conf.content);this.conf.content=""}else{if(this.conf.contentHTML.length>0){this.setContentHTML(this.conf.contentHTML);this.conf.contentHTML=""}}return this}dhtmlXEditor.prototype.setSizes=function(){this.cell._setSize(0,0,this.base.clientWidth,this.base.clientHeight)};dhtmlXEditor.prototype.setReadonly=function(a){this.conf.roMode=(a===true);this._prepareContent(true,this.conf.roMode);this.cBlock.style.display=(this.conf.roMode?"":"none")};dhtmlXEditor.prototype.isReadonly=function(a){return(this.conf.roMode||false)};dhtmlXEditor.prototype.setSkin=function(a){this.base.className=String(this.base.className).replace(new RegExp("dhxeditor_"+this.conf.skin),"dhxeditor_"+a);this.conf.skin=this.cell.conf.skin=a;if(this.tb){this.cell.detachToolbar(a);this.tb=null;this.attachToolbar()}this.setSizes()};window.dhtmlXEditorCell=function(c,a){dhtmlXCellObject.apply(this,[c,"_editor"]);var b=this;this.editor=a;this.conf.skin=this.editor.conf.skin;this.attachEvent("_onCellUnload",function(){this._stbUnload();this.editor=null;b=null});this._stbInit();return this};dhtmlXEditorCell.prototype=new dhtmlXCellObject();dhtmlXEditorCell.prototype._stbInit=function(){var g=this;var f=document.createElement("DIV");f.className="dhx_cell_stb";this.cell.insertBefore(f,this.cell.childNodes[this.conf.idx.cont]);f.onselectstart=function(a){a=a||event;a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};var e={bold:"applyBold",italic:"applyItalic",underline:"applyUnderscore",clearformat:"clearFormatting"};for(var c in e){var b=document.createElement("A");b.href="javascript:void(0);";b.tabIndex=-1;f.appendChild(b);b.onmousedown=b.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};var h=document.createElement("DIV");h.className="dhx_cell_stb_button btn_"+c;h._actv=c.charAt(0);h._cmd=e[c];b.appendChild(h);h.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};h.onmousedown=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}g.editor[this._cmd]();g.editor.callEvent("onToolbarClick",[this._actv])};h=b=null}f=null;this._stbUnload=function(){var a=this.cell.childNodes[this.conf.idx.stb];a.onselectstart=null;while(a.childNodes.length>0){a.lastChild.onmousedown=a.lastChild.onclick=null;a.lastChild.firstChild.onmousedown=a.lastChild.firstChild.onclick=null;a.lastChild.firstChild._actv=a.lastChild.firstChild._cmd=null;a.lastChild.removeChild(a.lastChild.firstChild);a.removeChild(a.lastChild)}a.parentNode.removeChild(a);a=g=null;this.conf.idx_data.stb=this.conf.ofs_nodes.t._getStbHeight=null;delete this.conf.ofs_nodes.t._getStbHeight;delete this.conf.idx_data.stb;this._updateIdx()};this.conf.ofs_nodes.t._getStbHeight="func";this.conf.idx_data.stb="dhx_cell_stb";this._updateIdx()};dhtmlXEditorCell.prototype._stbHide=function(){this.cell.childNodes[this.conf.idx.stb].style.display="none"};dhtmlXEditorCell.prototype._getStbHeight=function(){return this.cell.childNodes[this.conf.idx.stb].offsetHeight};dhtmlXEditor.prototype.attachToolbar=function(b){if(this.tb!=null){return}if(b!=null){this.conf.iconsPath=b}this.cell._stbHide();this.tb=this.cell.attachToolbar({icons_path:this.conf.iconsPath+"/dhxeditor_"+String(this.conf.skin).replace(/^dhx_/,"")+"/",skin:this.conf.skin});this.setSizes();this._availFonts=new Array("Arial","Arial Narrow","Comic Sans MS","Courier","Georgia","Impact","Tahoma","Times New Roman","Verdana");this._initFont=this._availFonts[0];this._xmlFonts="";for(var f=0;f<this._availFonts.length;f++){var d=String(this._availFonts[f]).replace(/\s/g,"_");this._xmlFonts+='<item type="button" id="applyFontFamily:'+d+'"><itemText><![CDATA[<img src="'+this.tb.imagePath+"font_"+String(d).toLowerCase()+'.gif" border="0" style="/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;">]]></itemText></item>'}this._availSizes={"1":"8pt","2":"10pt","3":"12pt","4":"14pt","5":"18pt","6":"24pt","7":"36pt"};this._xmlSizes="";for(var c in this._availSizes){this._xmlSizes+='<item type="button" id="applyFontSize:'+c+":"+this._availSizes[c]+'" text="'+this._availSizes[c]+'"/>'}this.tbXML='<toolbar><item id="applyH1" type="buttonTwoState" img="h1.gif" imgdis="h4_dis.gif" title="H1"/><item id="applyH2" type="buttonTwoState" img="h2.gif" imgdis="h4_dis.gif" title="H2"/><item id="applyH3" type="buttonTwoState" img="h3.gif" imgdis="h4_dis.gif" title="H3"/><item id="applyH4" type="buttonTwoState" img="h4.gif" imgdis="h4_dis.gif" title="H4"/><item id="separ01" type="separator"/><item id="applyBold" type="buttonTwoState" img="bold.gif" imgdis="bold_dis.gif" title="Bold Text"/><item id="applyItalic" type="buttonTwoState" img="italic.gif" imgdis="italic_dis.gif" title="Italic Text"/><item id="applyUnderscore" type="buttonTwoState" img="underline.gif" imgdis="underline_dis.gif" title="Underscore Text"/><item id="applyStrikethrough" type="buttonTwoState" img="strike.gif" imgdis="strike_dis.gif" title="Strikethrough Text"/><item id="separ02" type="separator"/><item id="alignLeft" type="buttonTwoState" img="align_left.gif" imgdis="align_left_dis.gif" title="Left Alignment"/><item id="alignCenter" type="buttonTwoState" img="align_center.gif" imgdis="align_center_dis.gif" title="Center Alignment"/><item id="alignRight" type="buttonTwoState" img="align_right.gif" imgdis="align_right_dis.gif" title="Right Alignment"/><item id="alignJustify" type="buttonTwoState" img="align_justify.gif" title="Justified Alignment"/><item id="separ03" type="separator"/><item id="applySub" type="buttonTwoState" img="script_sub.gif" imgdis="script_sub.gif" title="Subscript"/><item id="applySuper" type="buttonTwoState" img="script_super.gif" imgdis="script_super_dis.gif" title="Superscript"/><item id="separ04" type="separator"/><item id="createNumList" type="button" img="list_number.gif" imgdis="list_number_dis.gif" title="Number List"/><item id="createBulList" type="button" img="list_bullet.gif" imgdis="list_bullet_dis.gif" title="Bullet List"/><item id="separ05" type="separator"/><item id="increaseIndent" type="button" img="indent_inc.gif" imgdis="indent_inc_dis.gif" title="Increase Indent"/><item id="decreaseIndent" type="button" img="indent_dec.gif" imgdis="indent_dec_dis.gif" title="Decrease Indent"/><item id="separ06" type="separator"/><item id="clearFormatting" type="button" img="clear.gif" title="Clear Formatting"/></toolbar>';this.tb.loadStruct(this.tbXML);this._checkAlign=function(a){this.tb.setItemState("alignCenter",false);this.tb.setItemState("alignRight",false);this.tb.setItemState("alignJustify",false);this.tb.setItemState("alignLeft",false);if(a){this.tb.setItemState(a,true)}};this._checkH=function(a){this.tb.setItemState("applyH1",false);this.tb.setItemState("applyH2",false);this.tb.setItemState("applyH3",false);this.tb.setItemState("applyH4",false);if(a){this.tb.setItemState(a,true)}};this._doOnFocusChanged=function(h){if(!h.h1&&!h.h2&&!h.h3&&!h.h4){var a=(String(h.fontWeight).search(/bold/i)!=-1)||(Number(h.fontWeight)>=700);this.tb.setItemState("applyBold",a)}else{this.tb.setItemState("applyBold",false)}var g="alignLeft";if(String(h.textAlign).search(/center/)!=-1){g="alignCenter"}if(String(h.textAlign).search(/right/)!=-1){g="alignRight"}if(String(h.textAlign).search(/justify/)!=-1){g="alignJustify"}this.tb.setItemState(g,true);this._checkAlign(g);this.tb.setItemState("applyH1",h.h1);this.tb.setItemState("applyH2",h.h2);this.tb.setItemState("applyH3",h.h3);this.tb.setItemState("applyH4",h.h4);if(window._KHTMLrv){h.sub=(h.vAlign=="sub");h.sup=(h.vAlign=="super")}this.tb.setItemState("applyItalic",(h.fontStyle=="italic"));this.tb.setItemState("applyStrikethrough",h.del);this.tb.setItemState("applySub",h.sub);this.tb.setItemState("applySuper",h.sup);this.tb.setItemState("applyUnderscore",h.u)};this._doOnToolbarClick=function(g){var a=String(g).split(":");if(this[a[0]]!=null){if(typeof(this[a[0]])=="function"){this[a[0]](a[1]);this.callEvent("onToolbarClick",[g])}}};this._doOnStateChange=function(g,a){this[g]();switch(g){case"alignLeft":case"alignCenter":case"alignRight":case"alignJustify":this._checkAlign(g);break;case"applyH1":case"applyH2":case"applyH3":case"applyH4":this._checkH(g);break}this.callEvent("onToolbarClick",[g])};this._doOnBeforeStateChange=function(g,a){if((g=="alignLeft"||g=="alignCenter"||g=="alignRight"||g=="alignJustify")&&a==true){return false}return true};var e=this;this.tb.attachEvent("onClick",function(a){e._doOnToolbarClick(a)});this.tb.attachEvent("onStateChange",function(g,a){e._doOnStateChange(g,a)});this.tb.attachEvent("onBeforeStateChange",function(g,a){return e._doOnBeforeStateChange(g,a)});this.applyBold=function(){this._runCommand("Bold")};this.applyItalic=function(){this._runCommand("Italic")};this.applyUnderscore=function(){this._runCommand("Underline")};this.applyStrikethrough=function(){this._runCommand("StrikeThrough")};this.alignLeft=function(){this._runCommand("JustifyLeft")};this.alignRight=function(){this._runCommand("JustifyRight")};this.alignCenter=function(){this._runCommand("JustifyCenter")};this.alignJustify=function(){this._runCommand("JustifyFull")};this.applySub=function(){this._runCommand("Subscript")};this.applySuper=function(){this._runCommand("Superscript")};this.applyH1=function(){this._runCommand("FormatBlock","<H1>")};this.applyH2=function(){this._runCommand("FormatBlock","<H2>")};this.applyH3=function(){this._runCommand("FormatBlock","<H3>")};this.applyH4=function(){this._runCommand("FormatBlock","<H4>")};this.createNumList=function(){this._runCommand("InsertOrderedList")};this.createBulList=function(){this._runCommand("InsertUnorderedList")};this.increaseIndent=function(){this._runCommand("Indent")};this.decreaseIndent=function(){this._runCommand("Outdent")};this.clearFormatting=function(){this._runCommand("RemoveFormat");this.tb.setItemState("applyBold",false);this.tb.setItemState("applyItalic",false);this.tb.setItemState("applyStrikethrough",false);this.tb.setItemState("applySub",false);this.tb.setItemState("applySuper",false);this.tb.setItemState("applyUnderscore",false)}};